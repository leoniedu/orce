<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Otimizando a Coleta de Dados do IBGE com o Pacote R 'orce' • orce</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Otimizando a Coleta de Dados do IBGE com o Pacote R 'orce'">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">orce</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/orce.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/orce_presentation.html">Otimizando a Coleta de Dados do IBGE com o Pacote R 'orce'</a></li>
    <li><a class="dropdown-item" href="../articles/Technical-details-of-the-optimization-procedure.html">Technical details of the optimization procedure</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Otimizando a Coleta de Dados do IBGE com o Pacote R 'orce'</h1>
                        <h4 data-toc-skip class="author">Eduardo Leoni -
SES/BA - IBGE</h4>
            
      

      <div class="d-none name"><code>orce.Rmd</code></div>
    </div>

    
        <div class="abstract">
      <p class="abstract">Abstract</p>
      Apresentamos o pacote R <code>orce</code>, uma ferramenta criada
      para otimizar a alocação de Unidades de Coleta em pesquisas do
      IBGE, com o objetivo de minimizar os custos totais de coleta. Por
      meio de um modelo de otimização baseado em programação linear
      inteira mista, o pacote considera fatores como distâncias, tempo
      de viagem, custos fixos das agências e necessidade de diárias para
      encontrar a distribuição ideal das unidades de coleta. Estudos de
      caso realizados com a Pesquisa Nacional de Saúde (PNS) no Espírito
      Santo e a Pesquisa de Orçamentos Familiares (POF) na Bahia
      demonstram o potencial do orce para alcançar reduções
      significativas nos custos de coleta, chegando a até 40%. Além da
      economia financeira, o pacote permite atingir um melhor
      balanceamento da carga de trabalho entre as agências e oferece
      flexibilidade para se adaptar às necessidades e restrições
      específicas de cada pesquisa. O artigo explora estratégias
      adicionais de otimização, como a reorganização da jurisdição das
      agências e o ajuste do tempo de viagem considerado para o
      pagamento de diárias. A análise dos resultados reforça a
      importância da redução dos custos fixos como fator crucial para
      alcançar maior eficiência e economia na coleta de dados. O
      <code>orce</code> demonstra potencial para melhorar a eficiência
      da coleta de dados do IBGE, viabilizando pesquisas de alta
      qualidade com em um ambiente de restrição de gastos públicos.”
    </div>
    
<div class="section level2">
<h2 id="introdução">Introdução<a class="anchor" aria-label="anchor" href="#introdu%C3%A7%C3%A3o"></a>
</h2>
<p>A otimização dos custos de coleta de dados é um desafio comum em
instituições de pesquisa que lidam com grandes volumes de informações
distribuídas geograficamente. No caso do IBGE, a necessidade de otimizar
a alocação de setores censitários, escolas, ou empresas, às agências de
coleta do IBGE, se torna essencial, dada a complexidade logística e os
elevados custos envolvidos no processo.</p>
<p>As pesquisas MUNIC (Pesquisa de Informações Básicas Municipais) e POF
(Pesquisa de Orçamentos Familiares) são dois exemplos que ilustram a
importância dessa otimização. A MUNIC, que coleta dados sobre a gestão e
estrutura dos municípios brasileiros, e a POF, que investiga os hábitos
de consumo das famílias brasileiras, envolvem a coleta de dados em
milhares de domicílios e municípios, gerando altos custos
logísticos.</p>
<p>O pacote orce é uma ferramenta projetada para otimizar a alocação de
Unidades de Coleta (UCs), como setores censitários, prefeituras de
municípios ou estabelecimentos de ensino, às agências do IBGE. A
eficiência dessa alocação é fundamental para garantir a coleta de dados
de forma econômica e eficaz em pesquisas e censos de grande escala, como
o Censo Demográfico.</p>
<p>Coletar dados em milhares de domicílios espalhados por um vasto
território é um grande desafio. O orce entra em ação para ajudar a
definir a melhor estratégia, minimizando o tempo de deslocamento e os
custos envolvidos.</p>
<div class="section level3">
<h3 id="principais-características">Principais Características<a class="anchor" aria-label="anchor" href="#principais-caracter%C3%ADsticas"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<p><strong>Roteamento e Geocodificação:</strong></p>
<ul>
<li>Para o caso em que as unidades de coleta são setores censitários, a
função <code>ponto_setor_densidade</code> auxilia na identificação de
locais representativos dentro dos setores censitários, priorizando áreas
de alta densidade populacional para facilitar o acesso e garantir que o
algorítimo de roteamento tenha destinos/origens válidos.</li>
</ul>
</li>
<li>
<p><strong>Otimização Avançada da Alocação:</strong></p>
<ul>
<li>O <code>orce</code> implementa um algoritmo inteligente que encontra
a melhor forma de distribuir as UCs entre as agências do IBGE, levando
em conta diversos fatores, como a distância entre os locais, o tempo de
viagem, os custos fixos de cada agência e a necessidade de pagar diárias
aos pesquisadores.</li>
<li>A função <code>alocar_ucs</code> permite que você personalize as
restrições, como a capacidade de cada agência e as preferências de
localização, para que a alocação se adapte às necessidades específicas
do seu projeto. A função <code>alocar_municipios</code>, por sua vez,
otimiza a alocação mantendo as unidades de coleta de um mesmo município
com uma só agência.</li>
</ul>
</li>
<li>
<p><strong>Cálculo de Custos Detalhados:</strong></p>
<ul>
<li>O pacote considera as fronteiras administrativas para determinar
quando é necessário pagar diárias aos pesquisadores, garantindo que os
custos totais sejam calculados com precisão.</li>
<li>Outros custos importantes, como combustível e tempo de viagem,
também são levados em conta para fornecer uma estimativa completa dos
gastos da coleta de dados.</li>
</ul>
</li>
<li>
<p><strong>Flexibilidade e Adaptabilidade:</strong></p>
<ul>
<li>O <code>orce</code> permite que você personalize vários parâmetros,
como o custo do combustível, o custo por hora de viagem, o consumo de
combustível por quilômetro e as restrições específicas de cada
agência.</li>
<li>Essa flexibilidade garante que o pacote possa ser adaptado a
diferentes tipos de pesquisas e necessidades de coleta de dados,
tornando-o uma ferramenta versátil para o IBGE.</li>
</ul>
</li>
</ol>
</div>
<div class="section level3">
<h3 id="impacto-e-aplicações">Impacto e Aplicações<a class="anchor" aria-label="anchor" href="#impacto-e-aplica%C3%A7%C3%B5es"></a>
</h3>
<p>O pacote <code>orce</code> tem o potencial de gerar um impacto
significativo na eficiência e na economicidade das operações de pesquisa
e censo do IBGE. Ao otimizar a alocação de UCs, o pacote pode:</p>
<ul>
<li>
<strong>Reduzir custos de viagem e tempo de deslocamento:</strong>
Ao minimizar as distâncias percorridas e o tempo gasto em viagens, o
pacote contribui para a redução dos custos operacionais e aumenta a
produtividade das equipes de coleta de dados.</li>
<li>
<strong>Otimizar a utilização dos recursos das agências:</strong> A
alocação eficiente das UCs às agências garante que os recursos sejam
utilizados de forma equilibrada. A opção de impor límites máximos e
mínimos de unidades de coleta por agência ajuda a evitar sobrecarga em
algumas agências e ociosidade em outras.</li>
<li>
<strong>Facilitar o planejamento e a gestão da coleta de
dados:</strong> A capacidade de personalizar parâmetros e restrições
permite que o pacote se adapte às necessidades específicas de cada
projeto, facilitando o planejamento e a gestão das operações de coleta
de dados.</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="estudos-de-caso">Estudos de caso<a class="anchor" aria-label="anchor" href="#estudos-de-caso"></a>
</h2>
<div class="section level3">
<h3 id="caso-1--calculando-os-custos-da-coleta-da-munic">Caso 1. Calculando os custos da coleta da MUNIC<a class="anchor" aria-label="anchor" href="#caso-1--calculando-os-custos-da-coleta-da-munic"></a>
</h3>
<p>A Pesquisa de Informações Básicas Municipais (MUNIC) realizada pelo
Instituto Brasileiro de Geografia e Estatística (IBGE) é uma pesquisa
fundamental para coletar informações essenciais sobre os municípios em
todo o Brasil.</p>
<p>A alocação eficiente dos municípios às agências do IBGE responsáveis
pela coleta de dados é um aspecto importante para o sucesso da pesquisa
MUNIC, principalmente nas Unidades da Federação com maior número de
agências e municípios. O processo envolve atribuir cada município à
agência mais adequada, considerando fatores como proximidade geográfica,
capacidade da agência e custos de viagem. A complexidade dessa tarefa
aumenta com o número de municípios e agências envolvidas, tornando a
alocação manual desafiadora e potencialmente levando a atribuições
abaixo do ideal.</p>
<p>Para enfrentar esse desafio, o pacote <code>orce</code> utiliza
algoritmos avançados de otimização e incorpora vários fatores de custo
para identificar a estratégia de alocação mais eficiente, minimizando
despesas de viagem, carga de trabalho da equipe e custos gerais da
pesquisa.</p>
<p>Vamos começar a Superintendência Estadual do Espírito Santo, que tem
78 municípios, e 10 agências do IBGE.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/map_uc_agencias.html">map_uc_agencias</a></span><span class="op">(</span><span class="va">mnow</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>uc_lat<span class="op">=</span><span class="va">municipio_sede_lat</span>, uc_lon<span class="op">=</span><span class="va">municipio_sede_lon</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y<span class="op">=</span><span class="va">municipio_sede_lat</span>, x<span class="op">=</span><span class="va">municipio_sede_lon</span>, color<span class="op">=</span><span class="va">agencia_nome_bdo</span><span class="op">)</span>, data<span class="op">=</span><span class="va">mnow</span>, alpha<span class="op">=</span><span class="fl">3</span><span class="op">/</span><span class="fl">4</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>y<span class="op">=</span><span class="va">agencia_lat</span>, x<span class="op">=</span><span class="va">agencia_lon</span>, color<span class="op">=</span><span class="va">agencia_nome_bdo</span><span class="op">)</span>, data<span class="op">=</span><span class="va">mnow</span>, shape<span class="op">=</span><span class="fl">2</span>, size<span class="op">=</span><span class="fl">3</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">labs</span><span class="op">(</span>x<span class="op">=</span><span class="st">""</span>, y<span class="op">=</span><span class="st">""</span>, color<span class="op">=</span><span class="st">""</span><span class="op">)</span></span></code></pre></div>
<p><img src="orce_files/figure-html/unnamed-chunk-3-1.png" width="70%" style="display: block; margin: auto;"></p>
<p>Vamos supor que seja necessário visitar todos os 78 municípios. Como
podemos estimar o custo da coleta? Partiremos de algumas premissas.</p>
<ol style="list-style-type: decimal">
<li>Municípios na mesma microrregião ou região metropolitana não pagam
diária, a não ser que seja exigida pernoite.</li>
<li>Quando o tempo de viagem é maior que 1,5 horas, paga-se diária,
mesmo se na jurisdição da agência.</li>
<li>A coleta presencial dura 2 dias.</li>
<li>Quando há pernoite, são pagas 1,5 diárias, e a coleta é feita em 1
viagem(ns).</li>
<li>Quando não há pernoite, são feitas 2 viagem(ns) (ida e volta). Há
pagamento de meia-diária nos casos especificados no item 1.</li>
<li>As viagens, feitas por veículos do IBGE, tem origem nas agências e
destino nos municípios de coleta. Os veículos fazem 10 quilômetros por
litro, e o custo do combustível é de 6 por litro.
<strong>Importante</strong>: o consumo de combustível pode ser reduzido
significativamente fazendo “roteiros”, em que uma viagem percorre mais
de um município. Vamos ignorar, por enquanto, essa possibilidade.</li>
<li>Diárias são calculadas para apenas um funcionário e tem o valor de
335.</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ucs_now</span> <span class="op">&lt;-</span> <span class="va">municipios_22</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">municipio_codigo</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">==</span><span class="va">ufnow</span><span class="op">$</span><span class="va">uf_codigo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">agencias_bdo_mun</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">agencia_codigo</span>, <span class="va">municipio_codigo</span><span class="op">)</span>, by<span class="op">=</span><span class="st">"municipio_codigo"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>uc<span class="op">=</span><span class="va">municipio_codigo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co">## com agências intramunicipais tem mais de uma agência associada a município</span></span>
<span>  <span class="co">## vamos deixar só a primeira (em ordem numérica)</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">municipio_codigo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">agencia_codigo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>viagens<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">viagens_munic</span>, dias_coleta<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">dias_coleta_munic</span><span class="op">)</span></span></code></pre></div>
<p>Os dados com as unidades de coleta tem a seguinte estrutura:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">gt1</span><span class="op">(</span><span class="va">ucs_now</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">agencia_codigo</span>, <span class="va">dias_coleta</span>, <span class="va">viagens</span>, .keep_all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">agencia_codigo</span>, <span class="va">uc</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="va">ungroup</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span>uc<span class="op">=</span><span class="va">municipio_codigo</span>, <span class="va">agencia_codigo</span>, <span class="va">dias_coleta</span>, <span class="va">viagens</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div id="foodfieexo" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#foodfieexo table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#foodfieexo thead, #foodfieexo tbody, #foodfieexo tfoot, #foodfieexo tr, #foodfieexo td, #foodfieexo th {
  border-style: none;
}

#foodfieexo p {
  margin: 0;
  padding: 0;
}

#foodfieexo .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#foodfieexo .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#foodfieexo .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#foodfieexo .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#foodfieexo .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#foodfieexo .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#foodfieexo .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#foodfieexo .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#foodfieexo .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#foodfieexo .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#foodfieexo .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#foodfieexo .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#foodfieexo .gt_spanner_row {
  border-bottom-style: hidden;
}

#foodfieexo .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#foodfieexo .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#foodfieexo .gt_from_md > :first-child {
  margin-top: 0;
}

#foodfieexo .gt_from_md > :last-child {
  margin-bottom: 0;
}

#foodfieexo .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#foodfieexo .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#foodfieexo .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#foodfieexo .gt_row_group_first td {
  border-top-width: 2px;
}

#foodfieexo .gt_row_group_first th {
  border-top-width: 2px;
}

#foodfieexo .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#foodfieexo .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#foodfieexo .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#foodfieexo .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#foodfieexo .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#foodfieexo .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#foodfieexo .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#foodfieexo .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#foodfieexo .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#foodfieexo .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#foodfieexo .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#foodfieexo .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#foodfieexo .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#foodfieexo .gt_left {
  text-align: left;
}

#foodfieexo .gt_center {
  text-align: center;
}

#foodfieexo .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#foodfieexo .gt_font_normal {
  font-weight: normal;
}

#foodfieexo .gt_font_bold {
  font-weight: bold;
}

#foodfieexo .gt_font_italic {
  font-style: italic;
}

#foodfieexo .gt_super {
  font-size: 65%;
}

#foodfieexo .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#foodfieexo .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#foodfieexo .gt_indent_1 {
  text-indent: 5px;
}

#foodfieexo .gt_indent_2 {
  text-indent: 10px;
}

#foodfieexo .gt_indent_3 {
  text-indent: 15px;
}

#foodfieexo .gt_indent_4 {
  text-indent: 20px;
}

#foodfieexo .gt_indent_5 {
  text-indent: 25px;
}

#foodfieexo .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#foodfieexo div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Uc">Uc</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Agencia Codigo">Agencia Codigo</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Dias Coleta">Dias Coleta</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Viagens">Viagens</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="uc" class="gt_row gt_right">3200201</td>
<td headers="agencia_codigo" class="gt_row gt_right">320020100</td>
<td headers="dias_coleta" class="gt_row gt_right">2</td>
<td headers="viagens" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="uc" class="gt_row gt_right">3200508</td>
<td headers="agencia_codigo" class="gt_row gt_right">320020100</td>
<td headers="dias_coleta" class="gt_row gt_right">2</td>
<td headers="viagens" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="uc" class="gt_row gt_right">3201100</td>
<td headers="agencia_codigo" class="gt_row gt_right">320020100</td>
<td headers="dias_coleta" class="gt_row gt_right">2</td>
<td headers="viagens" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="uc" class="gt_row gt_right">3201159</td>
<td headers="agencia_codigo" class="gt_row gt_right">320020100</td>
<td headers="dias_coleta" class="gt_row gt_right">2</td>
<td headers="viagens" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="uc" class="gt_row gt_right">3201803</td>
<td headers="agencia_codigo" class="gt_row gt_right">320020100</td>
<td headers="dias_coleta" class="gt_row gt_right">2</td>
<td headers="viagens" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="uc" class="gt_row gt_right">3202009</td>
<td headers="agencia_codigo" class="gt_row gt_right">320020100</td>
<td headers="dias_coleta" class="gt_row gt_right">2</td>
<td headers="viagens" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="uc" class="gt_row gt_right">3202306</td>
<td headers="agencia_codigo" class="gt_row gt_right">320020100</td>
<td headers="dias_coleta" class="gt_row gt_right">2</td>
<td headers="viagens" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="uc" class="gt_row gt_right">3202454</td>
<td headers="agencia_codigo" class="gt_row gt_right">320020100</td>
<td headers="dias_coleta" class="gt_row gt_right">2</td>
<td headers="viagens" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="uc" class="gt_row gt_right">3202553</td>
<td headers="agencia_codigo" class="gt_row gt_right">320020100</td>
<td headers="dias_coleta" class="gt_row gt_right">2</td>
<td headers="viagens" class="gt_row gt_right">1</td>
</tr>
<tr>
<td headers="uc" class="gt_row gt_right">3202652</td>
<td headers="agencia_codigo" class="gt_row gt_right">320020100</td>
<td headers="dias_coleta" class="gt_row gt_right">2</td>
<td headers="viagens" class="gt_row gt_right">1</td>
</tr>
</tbody>
</table>
</div>
<p>Usamos como código da unidade de coleta (<code>uc</code>) o código
IBGE do município. Os dados devem ser únicos por <code>uc</code>. Dias
de coleta (<code>dias_coleta</code>) e número de viagens
(<code>viagens</code>) poderiam variar por município.</p>
<p>Precisamos também da distância de cada agência para cada município, e
se a viagem paga diária quando não há pernoite. No momento, estamos só
analisando os municípios com as respectivas agências de jurisdição, essa
diária não é devida. Mas ao analisar alocações alternativas, é
importante saber quando é que diárias são devidas. Essa informação está
na tabela <code>agencias_municipios_diaria</code>, disponível no pacote
para todas as unidades da federação.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">agencias_municipios_diaria</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">semi_join</a></span><span class="op">(</span><span class="va">ucs_now</span>, by<span class="op">=</span><span class="st">"municipio_codigo"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">agencia_codigo</span>, <span class="va">diaria_municipio</span>, .keep_all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">agencia_codigo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu">gt1</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="mbwkkeulbf" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#mbwkkeulbf table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#mbwkkeulbf thead, #mbwkkeulbf tbody, #mbwkkeulbf tfoot, #mbwkkeulbf tr, #mbwkkeulbf td, #mbwkkeulbf th {
  border-style: none;
}

#mbwkkeulbf p {
  margin: 0;
  padding: 0;
}

#mbwkkeulbf .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mbwkkeulbf .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#mbwkkeulbf .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mbwkkeulbf .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mbwkkeulbf .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mbwkkeulbf .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mbwkkeulbf .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mbwkkeulbf .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mbwkkeulbf .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mbwkkeulbf .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mbwkkeulbf .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mbwkkeulbf .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mbwkkeulbf .gt_spanner_row {
  border-bottom-style: hidden;
}

#mbwkkeulbf .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#mbwkkeulbf .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#mbwkkeulbf .gt_from_md > :first-child {
  margin-top: 0;
}

#mbwkkeulbf .gt_from_md > :last-child {
  margin-bottom: 0;
}

#mbwkkeulbf .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mbwkkeulbf .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#mbwkkeulbf .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#mbwkkeulbf .gt_row_group_first td {
  border-top-width: 2px;
}

#mbwkkeulbf .gt_row_group_first th {
  border-top-width: 2px;
}

#mbwkkeulbf .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mbwkkeulbf .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#mbwkkeulbf .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#mbwkkeulbf .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mbwkkeulbf .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mbwkkeulbf .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mbwkkeulbf .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#mbwkkeulbf .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mbwkkeulbf .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mbwkkeulbf .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mbwkkeulbf .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mbwkkeulbf .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mbwkkeulbf .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mbwkkeulbf .gt_left {
  text-align: left;
}

#mbwkkeulbf .gt_center {
  text-align: center;
}

#mbwkkeulbf .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mbwkkeulbf .gt_font_normal {
  font-weight: normal;
}

#mbwkkeulbf .gt_font_bold {
  font-weight: bold;
}

#mbwkkeulbf .gt_font_italic {
  font-style: italic;
}

#mbwkkeulbf .gt_super {
  font-size: 65%;
}

#mbwkkeulbf .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#mbwkkeulbf .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#mbwkkeulbf .gt_indent_1 {
  text-indent: 5px;
}

#mbwkkeulbf .gt_indent_2 {
  text-indent: 10px;
}

#mbwkkeulbf .gt_indent_3 {
  text-indent: 15px;
}

#mbwkkeulbf .gt_indent_4 {
  text-indent: 20px;
}

#mbwkkeulbf .gt_indent_5 {
  text-indent: 25px;
}

#mbwkkeulbf .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#mbwkkeulbf div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Agencia Codigo">Agencia Codigo</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Municipio Codigo">Municipio Codigo</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Diaria Municipio">Diaria Municipio</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="agencia_codigo" class="gt_row gt_right">320020100</td>
<td headers="municipio_codigo" class="gt_row gt_right">3200102</td>
<td headers="diaria_municipio" class="gt_row gt_center">TRUE</td>
</tr>
<tr>
<td headers="agencia_codigo" class="gt_row gt_right">320020100</td>
<td headers="municipio_codigo" class="gt_row gt_right">3200201</td>
<td headers="diaria_municipio" class="gt_row gt_center">FALSE</td>
</tr>
<tr>
<td headers="agencia_codigo" class="gt_row gt_right">320120900</td>
<td headers="municipio_codigo" class="gt_row gt_right">3200102</td>
<td headers="diaria_municipio" class="gt_row gt_center">FALSE</td>
</tr>
<tr>
<td headers="agencia_codigo" class="gt_row gt_right">320120900</td>
<td headers="municipio_codigo" class="gt_row gt_right">3200136</td>
<td headers="diaria_municipio" class="gt_row gt_center">TRUE</td>
</tr>
<tr>
<td headers="agencia_codigo" class="gt_row gt_right">320130800</td>
<td headers="municipio_codigo" class="gt_row gt_right">3200102</td>
<td headers="diaria_municipio" class="gt_row gt_center">TRUE</td>
</tr>
<tr>
<td headers="agencia_codigo" class="gt_row gt_right">320130800</td>
<td headers="municipio_codigo" class="gt_row gt_right">3201308</td>
<td headers="diaria_municipio" class="gt_row gt_center">FALSE</td>
</tr>
<tr>
<td headers="agencia_codigo" class="gt_row gt_right">320150600</td>
<td headers="municipio_codigo" class="gt_row gt_right">3200102</td>
<td headers="diaria_municipio" class="gt_row gt_center">TRUE</td>
</tr>
<tr>
<td headers="agencia_codigo" class="gt_row gt_right">320150600</td>
<td headers="municipio_codigo" class="gt_row gt_right">3200136</td>
<td headers="diaria_municipio" class="gt_row gt_center">FALSE</td>
</tr>
<tr>
<td headers="agencia_codigo" class="gt_row gt_right">320240500</td>
<td headers="municipio_codigo" class="gt_row gt_right">3200102</td>
<td headers="diaria_municipio" class="gt_row gt_center">TRUE</td>
</tr>
<tr>
<td headers="agencia_codigo" class="gt_row gt_right">320240500</td>
<td headers="municipio_codigo" class="gt_row gt_right">3200300</td>
<td headers="diaria_municipio" class="gt_row gt_center">FALSE</td>
</tr>
</tbody>
</table>
</div>
<p>Precisamos também das distâncias, em quilômetros, entre cada agência
e cada sede municipal (disponível em
<code>distancias_agencias_municipios_osrm</code>), que combinamos com as
informações sobre as diárias
(<code>agencias_municipios_diaria</code>).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">distancias_ucs</span> <span class="op">&lt;-</span> <span class="va">distancias_agencias_municipios_osrm</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>                    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">agencias_municipios_diaria_now</span>,</span>
<span>                              by <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/join_by.html" class="external-link">join_by</a></span><span class="op">(</span><span class="va">agencia_codigo</span>, <span class="va">municipio_codigo</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>                    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>uc<span class="op">=</span><span class="va">municipio_codigo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">semi_join</a></span><span class="op">(</span><span class="va">ucs_now</span>, by<span class="op">=</span><span class="st">"uc"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>diaria_pernoite<span class="op">=</span><span class="va">duracao_horas</span><span class="op">&gt;</span><span class="va">params</span><span class="op">$</span><span class="va">horas_viagem_pernoite</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">gt1</span><span class="op">(</span><span class="va">distancias_ucs</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">agencia_codigo</span>, <span class="va">diaria_municipio</span>, <span class="va">diaria_pernoite</span>, .keep_all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>         <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">agencia_codigo</span>, <span class="va">uc</span>, <span class="va">distancia_km</span>,</span>
<span>                               <span class="va">duracao_horas</span>, <span class="va">diaria_municipio</span>, <span class="va">diaria_pernoite</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">agencia_codigo</span>, <span class="va">uc</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div id="dpbcyvkguf" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#dpbcyvkguf table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#dpbcyvkguf thead, #dpbcyvkguf tbody, #dpbcyvkguf tfoot, #dpbcyvkguf tr, #dpbcyvkguf td, #dpbcyvkguf th {
  border-style: none;
}

#dpbcyvkguf p {
  margin: 0;
  padding: 0;
}

#dpbcyvkguf .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#dpbcyvkguf .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#dpbcyvkguf .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#dpbcyvkguf .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#dpbcyvkguf .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dpbcyvkguf .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dpbcyvkguf .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dpbcyvkguf .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#dpbcyvkguf .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#dpbcyvkguf .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#dpbcyvkguf .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#dpbcyvkguf .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#dpbcyvkguf .gt_spanner_row {
  border-bottom-style: hidden;
}

#dpbcyvkguf .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#dpbcyvkguf .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#dpbcyvkguf .gt_from_md > :first-child {
  margin-top: 0;
}

#dpbcyvkguf .gt_from_md > :last-child {
  margin-bottom: 0;
}

#dpbcyvkguf .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#dpbcyvkguf .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#dpbcyvkguf .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#dpbcyvkguf .gt_row_group_first td {
  border-top-width: 2px;
}

#dpbcyvkguf .gt_row_group_first th {
  border-top-width: 2px;
}

#dpbcyvkguf .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dpbcyvkguf .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#dpbcyvkguf .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#dpbcyvkguf .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dpbcyvkguf .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dpbcyvkguf .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#dpbcyvkguf .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#dpbcyvkguf .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#dpbcyvkguf .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dpbcyvkguf .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dpbcyvkguf .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dpbcyvkguf .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dpbcyvkguf .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#dpbcyvkguf .gt_left {
  text-align: left;
}

#dpbcyvkguf .gt_center {
  text-align: center;
}

#dpbcyvkguf .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#dpbcyvkguf .gt_font_normal {
  font-weight: normal;
}

#dpbcyvkguf .gt_font_bold {
  font-weight: bold;
}

#dpbcyvkguf .gt_font_italic {
  font-style: italic;
}

#dpbcyvkguf .gt_super {
  font-size: 65%;
}

#dpbcyvkguf .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#dpbcyvkguf .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#dpbcyvkguf .gt_indent_1 {
  text-indent: 5px;
}

#dpbcyvkguf .gt_indent_2 {
  text-indent: 10px;
}

#dpbcyvkguf .gt_indent_3 {
  text-indent: 15px;
}

#dpbcyvkguf .gt_indent_4 {
  text-indent: 20px;
}

#dpbcyvkguf .gt_indent_5 {
  text-indent: 25px;
}

#dpbcyvkguf .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#dpbcyvkguf div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Agencia Codigo">Agencia Codigo</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Uc">Uc</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Distancia Km">Distancia Km</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Duracao Horas">Duracao Horas</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Diaria Municipio">Diaria Municipio</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Diaria Pernoite">Diaria Pernoite</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="agencia_codigo" class="gt_row gt_right">320020100</td>
<td headers="uc" class="gt_row gt_right">3200102</td>
<td headers="distancia_km" class="gt_row gt_right">132,51</td>
<td headers="duracao_horas" class="gt_row gt_right">2,2</td>
<td headers="diaria_municipio" class="gt_row gt_center">TRUE</td>
<td headers="diaria_pernoite" class="gt_row gt_center">TRUE</td>
</tr>
<tr>
<td headers="agencia_codigo" class="gt_row gt_right">320020100</td>
<td headers="uc" class="gt_row gt_right">3200201</td>
<td headers="distancia_km" class="gt_row gt_right">1,14</td>
<td headers="duracao_horas" class="gt_row gt_right">0,03</td>
<td headers="diaria_municipio" class="gt_row gt_center">FALSE</td>
<td headers="diaria_pernoite" class="gt_row gt_center">FALSE</td>
</tr>
<tr>
<td headers="agencia_codigo" class="gt_row gt_right">320020100</td>
<td headers="uc" class="gt_row gt_right">3200706</td>
<td headers="distancia_km" class="gt_row gt_right">62,91</td>
<td headers="duracao_horas" class="gt_row gt_right">1,01</td>
<td headers="diaria_municipio" class="gt_row gt_center">TRUE</td>
<td headers="diaria_pernoite" class="gt_row gt_center">FALSE</td>
</tr>
<tr>
<td headers="agencia_codigo" class="gt_row gt_right">320020100</td>
<td headers="uc" class="gt_row gt_right">3201159</td>
<td headers="distancia_km" class="gt_row gt_right">95,86</td>
<td headers="duracao_horas" class="gt_row gt_right">1,59</td>
<td headers="diaria_municipio" class="gt_row gt_center">FALSE</td>
<td headers="diaria_pernoite" class="gt_row gt_center">TRUE</td>
</tr>
<tr>
<td headers="agencia_codigo" class="gt_row gt_right">320120900</td>
<td headers="uc" class="gt_row gt_right">3200102</td>
<td headers="distancia_km" class="gt_row gt_right">119,44</td>
<td headers="duracao_horas" class="gt_row gt_right">2,03</td>
<td headers="diaria_municipio" class="gt_row gt_center">FALSE</td>
<td headers="diaria_pernoite" class="gt_row gt_center">TRUE</td>
</tr>
<tr>
<td headers="agencia_codigo" class="gt_row gt_right">320120900</td>
<td headers="uc" class="gt_row gt_right">3200136</td>
<td headers="distancia_km" class="gt_row gt_right">305,85</td>
<td headers="duracao_horas" class="gt_row gt_right">5,09</td>
<td headers="diaria_municipio" class="gt_row gt_center">TRUE</td>
<td headers="diaria_pernoite" class="gt_row gt_center">TRUE</td>
</tr>
</tbody>
</table>
</div>
<p>Observação: A coluna <code>diaria_pernoite</code> é calculada com
base na duração da viagem (ida). A partir de 1,5, são pagas diárias,
mesmo se na jurisdição da agência.</p>
<p>Estamos, agora, prontos para calcular os custos de coleta.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">params_munic</span> <span class="op">&lt;-</span> <span class="va">params</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">params</span><span class="op">)</span><span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span><span class="va">params_alocar_ucs</span><span class="op">]</span></span>
<span><span class="va">params_munic</span><span class="op">$</span><span class="va">remuneracao_entrevistador</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span></span>
<span><span class="va">params_munic</span><span class="op">$</span><span class="va">agencias</span> <span class="op">&lt;-</span> <span class="va">agencias_now</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>dias_coleta_agencia_max<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">dias_coleta_agencia_max_munic</span><span class="op">)</span></span>
<span><span class="va">params_munic</span><span class="op">$</span><span class="va">distancias_ucs</span> <span class="op">&lt;-</span> <span class="va">distancias_ucs</span></span>
<span><span class="va">params_munic</span><span class="op">$</span><span class="va">ucs</span> <span class="op">&lt;-</span> <span class="va">ucs_now</span></span>
<span><span class="va">params_munic</span><span class="op">$</span><span class="va">resultado_completo</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span>
<span><span class="va">params_munic</span><span class="op">$</span><span class="va">dias_coleta_entrevistador_max</span> <span class="op">&lt;-</span> <span class="va">params</span><span class="op">$</span><span class="va">dias_coleta_entrevistador_max_munic</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">params_munic</span>,<span class="va">head</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; $custo_hora_viagem</span></span>
<span><span class="co">#&gt; [1] 10</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $custo_litro_combustivel</span></span>
<span><span class="co">#&gt; [1] 6</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $kml</span></span>
<span><span class="co">#&gt; [1] 10</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $valor_diaria</span></span>
<span><span class="co">#&gt; [1] 335</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $adicional_troca_jurisdicao</span></span>
<span><span class="co">#&gt; [1] 100</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $remuneracao_entrevistador</span></span>
<span><span class="co">#&gt; [1] 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $solver</span></span>
<span><span class="co">#&gt; [1] "cbc"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $max_time</span></span>
<span><span class="co">#&gt; [1] 9000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $rel_tol</span></span>
<span><span class="co">#&gt; [1] 0,02</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $agencias</span></span>
<span><span class="co">#&gt; Simple feature collection with 2 features and 9 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -41,5317 ymin: -20,8496 xmax: -41,1114 ymax: -20,7613</span></span>
<span><span class="co">#&gt; Geodetic CRS:  SIRGAS 2000</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 10</span></span></span>
<span><span class="co">#&gt;   uf_codigo agencia_codigo agencia_nome            uorg  agencia_lat agencia_lon</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 32        320020100      Alegre                  593         -<span style="color: #BB0000;">20.8</span>       -<span style="color: #BB0000;">41.5</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 32        320120900      Cachoeiro de Itapemirim 594         -<span style="color: #BB0000;">20.8</span>       -<span style="color: #BB0000;">41.1</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 4 more variables: geometry &lt;POINT [°]&gt;, custo_fixo &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   max_uc_agencia &lt;dbl&gt;, dias_coleta_agencia_max &lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $distancias_ucs</span></span>
<span><span class="co">#&gt;   agencia_codigo municipio_codigo distancia_km duracao_horas diaria_municipio</span></span>
<span><span class="co">#&gt; 1      320020100          3200102       132,51          2,20             TRUE</span></span>
<span><span class="co">#&gt; 2      320120900          3200102       119,44          2,03            FALSE</span></span>
<span><span class="co">#&gt;        uc diaria_pernoite</span></span>
<span><span class="co">#&gt; 1 3200102            TRUE</span></span>
<span><span class="co">#&gt; 2 3200102            TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $ucs</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 14</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   municipio_codigo [2]</span></span></span>
<span><span class="co">#&gt;   municipio_codigo municipio_sede_lon municipio_sede_lat municipio_nome</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 3200102                       -<span style="color: #BB0000;">41.1</span>              -<span style="color: #BB0000;">20.1</span> Afonso Cláudio</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 3200136                       -<span style="color: #BB0000;">40.7</span>              -<span style="color: #BB0000;">19.0</span> Águia Branca  </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 10 more variables: uf_codigo &lt;chr&gt;, uf_sigla &lt;chr&gt;, uf_nome &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   regiao_codigo &lt;chr&gt;, regiao_nome &lt;chr&gt;, municipio_populacao &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   agencia_codigo &lt;chr&gt;, uc &lt;chr&gt;, viagens &lt;int&gt;, dias_coleta &lt;int&gt;</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $resultado_completo</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dias_coleta_entrevistador_max</span></span>
<span><span class="co">#&gt; [1] 40</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"parâmetros sem valor fixado: "</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">setdiff</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">params_alocar_ucs</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">params_munic</span><span class="op">)</span><span class="op">)</span>, collapse<span class="op">=</span><span class="st">", "</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "parâmetros sem valor fixado:  diarias_entrevistador_max, n_entrevistadores_min, dias_treinamento, agencias_treinadas, agencias_treinamento, distancias_agencias"</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span>what <span class="op">=</span> <span class="va">alocar_ucs</span>, </span>
<span>              args<span class="op">=</span><span class="va">params_munic</span><span class="op">)</span></span></code></pre></div>
<div class="section level5">
<h5 id="custos-por-agência">Custos por agência<a class="anchor" aria-label="anchor" href="#custos-por-ag%C3%AAncia"></a>
</h5>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">j</span> <span class="op">&lt;-</span> <span class="va">res</span><span class="op">$</span><span class="va">resultado_ucs_jurisdicao</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">agencias_now</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="op">)</span>, by<span class="op">=</span><span class="st">"agencia_codigo"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">assistencias</span>, by<span class="op">=</span><span class="st">"agencia_codigo"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">assistencia_nome</span>, <span class="va">agencia_nome</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>municipios<span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">municipios</span>, <span class="va">total_diarias</span>, <span class="va">custo_diarias</span>, <span class="va">distancia_total_km</span>, <span class="va">custo_combustivel</span><span class="op">)</span>, <span class="va">sum</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; `summarise()` has grouped output by 'assistencia_nome'. You can override using</span></span>
<span><span class="co">#&gt; the `.groups` argument.</span></span>
<span><span class="fu">gt</span><span class="op">(</span><span class="va">j</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="va">ungroup</span>, groupname_col <span class="op">=</span> <span class="st">'assistencia_nome'</span>, rowname_col<span class="op">=</span><span class="st">'agencia_nome'</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/summary_rows.html" class="external-link">summary_rows</a></span><span class="op">(</span>fns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>fn<span class="op">=</span><span class="st">'sum'</span>, label<span class="op">=</span><span class="st">"Total da Assistência"</span><span class="op">)</span>, fmt<span class="op">=</span><span class="op">~</span><span class="fu">fmt_nums</span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">fmt_nums</span><span class="op">(</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/cols_label_with.html" class="external-link">cols_label_with</a></span><span class="op">(</span>fn<span class="op">=</span><span class="st">"nomear_colunas"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/grand_summary_rows.html" class="external-link">grand_summary_rows</a></span><span class="op">(</span>fns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>fn<span class="op">=</span><span class="st">'sum'</span>, label<span class="op">=</span><span class="st">"Total da Superintendência"</span><span class="op">)</span></span>
<span>                         , fmt <span class="op">=</span> <span class="op">~</span><span class="fu">fmt_nums</span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">print_gt</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="ivjubqtxva" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ivjubqtxva table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ivjubqtxva thead, #ivjubqtxva tbody, #ivjubqtxva tfoot, #ivjubqtxva tr, #ivjubqtxva td, #ivjubqtxva th {
  border-style: none;
}

#ivjubqtxva p {
  margin: 0;
  padding: 0;
}

#ivjubqtxva .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ivjubqtxva .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ivjubqtxva .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ivjubqtxva .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ivjubqtxva .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ivjubqtxva .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ivjubqtxva .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ivjubqtxva .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ivjubqtxva .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ivjubqtxva .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ivjubqtxva .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ivjubqtxva .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ivjubqtxva .gt_spanner_row {
  border-bottom-style: hidden;
}

#ivjubqtxva .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ivjubqtxva .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ivjubqtxva .gt_from_md > :first-child {
  margin-top: 0;
}

#ivjubqtxva .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ivjubqtxva .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ivjubqtxva .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ivjubqtxva .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ivjubqtxva .gt_row_group_first td {
  border-top-width: 2px;
}

#ivjubqtxva .gt_row_group_first th {
  border-top-width: 2px;
}

#ivjubqtxva .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ivjubqtxva .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ivjubqtxva .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ivjubqtxva .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ivjubqtxva .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ivjubqtxva .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ivjubqtxva .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ivjubqtxva .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ivjubqtxva .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ivjubqtxva .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ivjubqtxva .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ivjubqtxva .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ivjubqtxva .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ivjubqtxva .gt_left {
  text-align: left;
}

#ivjubqtxva .gt_center {
  text-align: center;
}

#ivjubqtxva .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ivjubqtxva .gt_font_normal {
  font-weight: normal;
}

#ivjubqtxva .gt_font_bold {
  font-weight: bold;
}

#ivjubqtxva .gt_font_italic {
  font-style: italic;
}

#ivjubqtxva .gt_super {
  font-size: 65%;
}

#ivjubqtxva .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ivjubqtxva .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ivjubqtxva .gt_indent_1 {
  text-indent: 5px;
}

#ivjubqtxva .gt_indent_2 {
  text-indent: 10px;
}

#ivjubqtxva .gt_indent_3 {
  text-indent: 15px;
}

#ivjubqtxva .gt_indent_4 {
  text-indent: 20px;
}

#ivjubqtxva .gt_indent_5 {
  text-indent: 25px;
}

#ivjubqtxva .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#ivjubqtxva div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id=""></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Municipios">Municipios</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Total Diarias">Total Diarias</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Custo Diarias">Custo Diarias</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Distancia Total Km">Distancia Total Km</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Custo Combustivel">Custo Combustivel</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_empty_group_heading" scope="colgroup" id=""></th>
    </tr>
<tr class="gt_row_group_first">
<th id="stub_1_1" scope="row" class="gt_row gt_left gt_stub">Alegre</th>
<td headers=" stub_1_1 municipios" class="gt_row gt_right">14</td>
<td headers=" stub_1_1 total_diarias" class="gt_row gt_right">1,5</td>
<td headers=" stub_1_1 custo_diarias" class="gt_row gt_right">R$502</td>
<td headers=" stub_1_1 distancia_total_km" class="gt_row gt_right">2.723</td>
<td headers=" stub_1_1 custo_combustivel" class="gt_row gt_right">R$1.634</td>
</tr>
<tr>
<th id="stub_1_2" scope="row" class="gt_row gt_left gt_stub">Cachoeiro de Itapemirim</th>
<td headers=" stub_1_2 municipios" class="gt_row gt_right">10</td>
<td headers=" stub_1_2 total_diarias" class="gt_row gt_right">3</td>
<td headers=" stub_1_2 custo_diarias" class="gt_row gt_right">R$1.005</td>
<td headers=" stub_1_2 distancia_total_km" class="gt_row gt_right">1.892,12</td>
<td headers=" stub_1_2 custo_combustivel" class="gt_row gt_right">R$1.135</td>
</tr>
<tr>
<th id="stub_1_3" scope="row" class="gt_row gt_left gt_stub">Cariacica</th>
<td headers=" stub_1_3 municipios" class="gt_row gt_right">8</td>
<td headers=" stub_1_3 total_diarias" class="gt_row gt_right">3</td>
<td headers=" stub_1_3 custo_diarias" class="gt_row gt_right">R$1.005</td>
<td headers=" stub_1_3 distancia_total_km" class="gt_row gt_right">1.347,08</td>
<td headers=" stub_1_3 custo_combustivel" class="gt_row gt_right">R$808</td>
</tr>
<tr>
<th id="stub_1_4" scope="row" class="gt_row gt_left gt_stub">Colatina</th>
<td headers=" stub_1_4 municipios" class="gt_row gt_right">12</td>
<td headers=" stub_1_4 total_diarias" class="gt_row gt_right">7,5</td>
<td headers=" stub_1_4 custo_diarias" class="gt_row gt_right">R$2.512</td>
<td headers=" stub_1_4 distancia_total_km" class="gt_row gt_right">2.605,74</td>
<td headers=" stub_1_4 custo_combustivel" class="gt_row gt_right">R$1.563</td>
</tr>
<tr>
<th id="stub_1_5" scope="row" class="gt_row gt_left gt_stub">Guarapari</th>
<td headers=" stub_1_5 municipios" class="gt_row gt_right">9</td>
<td headers=" stub_1_5 total_diarias" class="gt_row gt_right">1,5</td>
<td headers=" stub_1_5 custo_diarias" class="gt_row gt_right">R$502</td>
<td headers=" stub_1_5 distancia_total_km" class="gt_row gt_right">1.799,58</td>
<td headers=" stub_1_5 custo_combustivel" class="gt_row gt_right">R$1.080</td>
</tr>
<tr>
<th id="stub_1_6" scope="row" class="gt_row gt_left gt_stub">Linhares</th>
<td headers=" stub_1_6 municipios" class="gt_row gt_right">9</td>
<td headers=" stub_1_6 total_diarias" class="gt_row gt_right">1,5</td>
<td headers=" stub_1_6 custo_diarias" class="gt_row gt_right">R$502</td>
<td headers=" stub_1_6 distancia_total_km" class="gt_row gt_right">1.796,6</td>
<td headers=" stub_1_6 custo_combustivel" class="gt_row gt_right">R$1.078</td>
</tr>
<tr>
<th id="stub_1_7" scope="row" class="gt_row gt_left gt_stub">Serra</th>
<td headers=" stub_1_7 municipios" class="gt_row gt_right">3</td>
<td headers=" stub_1_7 total_diarias" class="gt_row gt_right">0</td>
<td headers=" stub_1_7 custo_diarias" class="gt_row gt_right">R$0</td>
<td headers=" stub_1_7 distancia_total_km" class="gt_row gt_right">414,28</td>
<td headers=" stub_1_7 custo_combustivel" class="gt_row gt_right">R$249</td>
</tr>
<tr>
<th id="stub_1_8" scope="row" class="gt_row gt_left gt_stub">São Mateus</th>
<td headers=" stub_1_8 municipios" class="gt_row gt_right">11</td>
<td headers=" stub_1_8 total_diarias" class="gt_row gt_right">6</td>
<td headers=" stub_1_8 custo_diarias" class="gt_row gt_right">R$2.010</td>
<td headers=" stub_1_8 distancia_total_km" class="gt_row gt_right">2.259,2</td>
<td headers=" stub_1_8 custo_combustivel" class="gt_row gt_right">R$1.356</td>
</tr>
<tr>
<th id="stub_1_9" scope="row" class="gt_row gt_left gt_stub">Vila Velha</th>
<td headers=" stub_1_9 municipios" class="gt_row gt_right">1</td>
<td headers=" stub_1_9 total_diarias" class="gt_row gt_right">0</td>
<td headers=" stub_1_9 custo_diarias" class="gt_row gt_right">R$0</td>
<td headers=" stub_1_9 distancia_total_km" class="gt_row gt_right">3,32</td>
<td headers=" stub_1_9 custo_combustivel" class="gt_row gt_right">R$2</td>
</tr>
<tr>
<th id="stub_1_10" scope="row" class="gt_row gt_left gt_stub">Vitória</th>
<td headers=" stub_1_10 municipios" class="gt_row gt_right">1</td>
<td headers=" stub_1_10 total_diarias" class="gt_row gt_right">0</td>
<td headers=" stub_1_10 custo_diarias" class="gt_row gt_right">R$0</td>
<td headers=" stub_1_10 distancia_total_km" class="gt_row gt_right">21,08</td>
<td headers=" stub_1_10 custo_combustivel" class="gt_row gt_right">R$13</td>
</tr>
<tr>
<th id="grand_summary_stub_1" scope="row" class="gt_row gt_left gt_stub gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">Total da Superintendência</th>
<td headers="grand_summary_stub_1 municipios" class="gt_row gt_right gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">78</td>
<td headers="grand_summary_stub_1 total_diarias" class="gt_row gt_right gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">24</td>
<td headers="grand_summary_stub_1 custo_diarias" class="gt_row gt_right gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">R$8.040</td>
<td headers="grand_summary_stub_1 distancia_total_km" class="gt_row gt_right gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">14.862</td>
<td headers="grand_summary_stub_1 custo_combustivel" class="gt_row gt_right gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">R$8.917</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">resultado_ucs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span></span>
<span>  <span class="va">res</span><span class="op">$</span><span class="va">resultado_ucs_otimo</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>plano<span class="op">=</span> <span class="st">"otimo"</span><span class="op">)</span>,</span>
<span>  <span class="va">res</span><span class="op">$</span><span class="va">resultado_ucs_jurisdicao</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>plano<span class="op">=</span> <span class="st">"jurisdicao"</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">uc</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>mudanca<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">agencia_codigo</span><span class="op">)</span><span class="op">)</span><span class="op">&gt;</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">toexport</span> <span class="op">&lt;-</span> <span class="va">res</span><span class="op">$</span><span class="va">resultado_ucs_jurisdicao</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>municipio_codigo<span class="op">=</span><span class="va">uc</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">agencias_now</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="op">)</span>, by <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/join_by.html" class="external-link">join_by</a></span><span class="op">(</span><span class="va">agencia_codigo</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">municipios_22</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">municipio_codigo</span>, <span class="va">municipio_nome</span><span class="op">)</span>, by <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/join_by.html" class="external-link">join_by</a></span><span class="op">(</span><span class="va">municipio_codigo</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">assistencias</span>, by <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/join_by.html" class="external-link">join_by</a></span><span class="op">(</span><span class="va">agencia_codigo</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute</a></span><span class="op">(</span></span>
<span>    <span class="va">assistencia_nome</span>,</span>
<span>    <span class="va">agencia_codigo</span>, <span class="va">agencia_nome</span>,</span>
<span>    <span class="va">municipio_nome</span>, <span class="va">municipio_codigo</span>,</span>
<span>            <span class="va">distancia_km</span>, <span class="va">duracao_horas</span>, <span class="va">diaria</span>, <span class="va">meia_diaria</span>, <span class="va">trechos</span>, <span class="va">total_diarias</span>, <span class="va">custo_diarias</span>, <span class="va">distancia_total_km</span>, <span class="va">custo_combustivel</span>, <span class="va">custo_horas_viagem</span>, <span class="va">custo_deslocamento</span><span class="op">)</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="co"># export_dir &lt;- file.path(here::here("vignettes", "articles", "munic"))</span></span>
<span><span class="co"># dir.create(export_dir, recursive = TRUE, showWarnings = FALSE)</span></span>
<span><span class="co"># export_path &lt;- file.path(export_dir,paste0("munic_", ufnow$uf_codigo, "_", format(Sys.time(), "%Y%m%d_%H"), ".xlsx"))</span></span>
<span><span class="co"># toexport_l &lt;- lapply(toexport%&gt;%split(.$assistencia_nome), function(x) janitor::remove_constant(x))</span></span>
<span><span class="co">#sigba::excel(toexport_l, filename = export_path)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="custos-por-município">Custos por município<a class="anchor" aria-label="anchor" href="#custos-por-munic%C3%ADpio"></a>
</h5>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mnow</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">resultado_ucs_jurisdicao</span>, by<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"municipio_codigo"</span><span class="op">=</span><span class="st">"uc"</span>, <span class="st">"agencia_codigo"</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute</a></span><span class="op">(</span><span class="va">municipio_nome</span>, agencia_nome<span class="op">=</span><span class="fu">capitalizar</span><span class="op">(</span><span class="va">agencia_nome</span><span class="op">)</span>, <span class="va">custo_diarias</span>, <span class="va">custo_combustivel</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">custo_diarias</span><span class="op">+</span><span class="va">custo_combustivel</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">gt1</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="fbsnayoreh" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#fbsnayoreh table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#fbsnayoreh thead, #fbsnayoreh tbody, #fbsnayoreh tfoot, #fbsnayoreh tr, #fbsnayoreh td, #fbsnayoreh th {
  border-style: none;
}

#fbsnayoreh p {
  margin: 0;
  padding: 0;
}

#fbsnayoreh .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#fbsnayoreh .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#fbsnayoreh .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#fbsnayoreh .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#fbsnayoreh .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fbsnayoreh .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fbsnayoreh .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fbsnayoreh .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#fbsnayoreh .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#fbsnayoreh .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#fbsnayoreh .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#fbsnayoreh .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#fbsnayoreh .gt_spanner_row {
  border-bottom-style: hidden;
}

#fbsnayoreh .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#fbsnayoreh .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#fbsnayoreh .gt_from_md > :first-child {
  margin-top: 0;
}

#fbsnayoreh .gt_from_md > :last-child {
  margin-bottom: 0;
}

#fbsnayoreh .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#fbsnayoreh .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#fbsnayoreh .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#fbsnayoreh .gt_row_group_first td {
  border-top-width: 2px;
}

#fbsnayoreh .gt_row_group_first th {
  border-top-width: 2px;
}

#fbsnayoreh .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fbsnayoreh .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#fbsnayoreh .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#fbsnayoreh .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fbsnayoreh .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fbsnayoreh .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#fbsnayoreh .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#fbsnayoreh .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#fbsnayoreh .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fbsnayoreh .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fbsnayoreh .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fbsnayoreh .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fbsnayoreh .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fbsnayoreh .gt_left {
  text-align: left;
}

#fbsnayoreh .gt_center {
  text-align: center;
}

#fbsnayoreh .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#fbsnayoreh .gt_font_normal {
  font-weight: normal;
}

#fbsnayoreh .gt_font_bold {
  font-weight: bold;
}

#fbsnayoreh .gt_font_italic {
  font-style: italic;
}

#fbsnayoreh .gt_super {
  font-size: 65%;
}

#fbsnayoreh .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#fbsnayoreh .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#fbsnayoreh .gt_indent_1 {
  text-indent: 5px;
}

#fbsnayoreh .gt_indent_2 {
  text-indent: 10px;
}

#fbsnayoreh .gt_indent_3 {
  text-indent: 15px;
}

#fbsnayoreh .gt_indent_4 {
  text-indent: 20px;
}

#fbsnayoreh .gt_indent_5 {
  text-indent: 25px;
}

#fbsnayoreh .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#fbsnayoreh div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Municipio ">Municipio </th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Agencia ">Agencia </th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Custo Diarias">Custo Diarias</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Custo Combustivel">Custo Combustivel</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="municipio_nome" class="gt_row gt_left">Ecoporanga</td>
<td headers="agencia_nome" class="gt_row gt_left">Colatina</td>
<td headers="custo_diarias" class="gt_row gt_right">R$502</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$218</td>
</tr>
<tr>
<td headers="municipio_nome" class="gt_row gt_left">Água Doce do Norte</td>
<td headers="agencia_nome" class="gt_row gt_left">Colatina</td>
<td headers="custo_diarias" class="gt_row gt_right">R$502</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$189</td>
</tr>
<tr>
<td headers="municipio_nome" class="gt_row gt_left">Laranja da Terra</td>
<td headers="agencia_nome" class="gt_row gt_left">Cachoeiro de Itapemirim</td>
<td headers="custo_diarias" class="gt_row gt_right">R$502</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$184</td>
</tr>
<tr>
<td headers="municipio_nome" class="gt_row gt_left">Ponto Belo</td>
<td headers="agencia_nome" class="gt_row gt_left">São Mateus</td>
<td headers="custo_diarias" class="gt_row gt_right">R$502</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$166</td>
</tr>
<tr>
<td headers="municipio_nome" class="gt_row gt_left">Mucurici</td>
<td headers="agencia_nome" class="gt_row gt_left">São Mateus</td>
<td headers="custo_diarias" class="gt_row gt_right">R$502</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$159</td>
</tr>
<tr>
<td headers="municipio_nome" class="gt_row gt_left">Mantenópolis</td>
<td headers="agencia_nome" class="gt_row gt_left">Colatina</td>
<td headers="custo_diarias" class="gt_row gt_right">R$502</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$153</td>
</tr>
<tr>
<td headers="municipio_nome" class="gt_row gt_left">Barra de São Francisco</td>
<td headers="agencia_nome" class="gt_row gt_left">Colatina</td>
<td headers="custo_diarias" class="gt_row gt_right">R$502</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$152</td>
</tr>
<tr>
<td headers="municipio_nome" class="gt_row gt_left">Afonso Cláudio</td>
<td headers="agencia_nome" class="gt_row gt_left">Cachoeiro de Itapemirim</td>
<td headers="custo_diarias" class="gt_row gt_right">R$502</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$143</td>
</tr>
<tr>
<td headers="municipio_nome" class="gt_row gt_left">Itaguaçu</td>
<td headers="agencia_nome" class="gt_row gt_left">Cariacica</td>
<td headers="custo_diarias" class="gt_row gt_right">R$502</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$143</td>
</tr>
<tr>
<td headers="municipio_nome" class="gt_row gt_left">Montanha</td>
<td headers="agencia_nome" class="gt_row gt_left">São Mateus</td>
<td headers="custo_diarias" class="gt_row gt_right">R$502</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$137</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level5">
<h5 id="lidando-com-contigências-da-coleta">Lidando com contigências da coleta<a class="anchor" aria-label="anchor" href="#lidando-com-contig%C3%AAncias-da-coleta"></a>
</h5>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">munnow</span> <span class="op">&lt;-</span> <span class="va">municipios_22</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">municipio_codigo</span><span class="op">==</span><span class="st">'3200904'</span><span class="op">)</span></span></code></pre></div>
<p>Suponha agora que é necessário fazer uma visita ao município de Barra
de São Francisco, mas a agência de jurisdição não está disponível por
qualquer motivo (férias, licença de saúde, veículo do IBGE quebrado,
etc.) Quais são as agências alternativas para realizar essa coleta? A
função <code>alocar_ucs</code> retorna, opcionalmente, a lista completa
de combinações entre agências
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>
municípios, que permite facilmente responder essa pergunta.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span><span class="op">$</span><span class="va">ucs_agencias_todas</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">semi_join</a></span><span class="op">(</span><span class="va">munnow</span>, by<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"uc"</span><span class="op">=</span><span class="st">"municipio_codigo"</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">agencias_now</span>, by<span class="op">=</span><span class="st">"agencia_codigo"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>jurisdicao<span class="op">=</span><span class="va">agencia_codigo_jurisdicao</span><span class="op">==</span><span class="va">agencia_codigo</span><span class="op">)</span><span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute</a></span><span class="op">(</span>agencia_nome<span class="op">=</span><span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"{agencia_nome} {if_else(jurisdicao, '(Jurisdição)', '')}"</span><span class="op">)</span>, <span class="va">duracao_horas</span>, <span class="va">distancia_km</span>, <span class="va">custo_diarias</span>, <span class="va">custo_combustivel</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">custo_diarias</span><span class="op">+</span><span class="va">custo_combustivel</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span><span class="op">|&gt;</span></span>
<span>  <span class="fu">print_gt</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="alspkzcbwj" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#alspkzcbwj table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#alspkzcbwj thead, #alspkzcbwj tbody, #alspkzcbwj tfoot, #alspkzcbwj tr, #alspkzcbwj td, #alspkzcbwj th {
  border-style: none;
}

#alspkzcbwj p {
  margin: 0;
  padding: 0;
}

#alspkzcbwj .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#alspkzcbwj .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#alspkzcbwj .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#alspkzcbwj .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#alspkzcbwj .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#alspkzcbwj .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#alspkzcbwj .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#alspkzcbwj .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#alspkzcbwj .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#alspkzcbwj .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#alspkzcbwj .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#alspkzcbwj .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#alspkzcbwj .gt_spanner_row {
  border-bottom-style: hidden;
}

#alspkzcbwj .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#alspkzcbwj .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#alspkzcbwj .gt_from_md > :first-child {
  margin-top: 0;
}

#alspkzcbwj .gt_from_md > :last-child {
  margin-bottom: 0;
}

#alspkzcbwj .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#alspkzcbwj .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#alspkzcbwj .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#alspkzcbwj .gt_row_group_first td {
  border-top-width: 2px;
}

#alspkzcbwj .gt_row_group_first th {
  border-top-width: 2px;
}

#alspkzcbwj .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#alspkzcbwj .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#alspkzcbwj .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#alspkzcbwj .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#alspkzcbwj .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#alspkzcbwj .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#alspkzcbwj .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#alspkzcbwj .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#alspkzcbwj .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#alspkzcbwj .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#alspkzcbwj .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#alspkzcbwj .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#alspkzcbwj .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#alspkzcbwj .gt_left {
  text-align: left;
}

#alspkzcbwj .gt_center {
  text-align: center;
}

#alspkzcbwj .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#alspkzcbwj .gt_font_normal {
  font-weight: normal;
}

#alspkzcbwj .gt_font_bold {
  font-weight: bold;
}

#alspkzcbwj .gt_font_italic {
  font-style: italic;
}

#alspkzcbwj .gt_super {
  font-size: 65%;
}

#alspkzcbwj .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#alspkzcbwj .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#alspkzcbwj .gt_indent_1 {
  text-indent: 5px;
}

#alspkzcbwj .gt_indent_2 {
  text-indent: 10px;
}

#alspkzcbwj .gt_indent_3 {
  text-indent: 15px;
}

#alspkzcbwj .gt_indent_4 {
  text-indent: 20px;
}

#alspkzcbwj .gt_indent_5 {
  text-indent: 25px;
}

#alspkzcbwj .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#alspkzcbwj div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Agencia ">Agencia </th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Duracao Horas">Duracao Horas</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Distancia Km">Distancia Km</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Custo Diarias">Custo Diarias</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Custo Combustivel">Custo Combustivel</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="agencia_nome" class="gt_row gt_center">Colatina (Jurisdição)</td>
<td headers="duracao_horas" class="gt_row gt_right">1,98</td>
<td headers="distancia_km" class="gt_row gt_right">126,91</td>
<td headers="custo_diarias" class="gt_row gt_right">R$502</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$152</td>
</tr>
<tr>
<td headers="agencia_nome" class="gt_row gt_center">São Mateus </td>
<td headers="duracao_horas" class="gt_row gt_right">2,43</td>
<td headers="distancia_km" class="gt_row gt_right">145,88</td>
<td headers="custo_diarias" class="gt_row gt_right">R$502</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$175</td>
</tr>
<tr>
<td headers="agencia_nome" class="gt_row gt_center">Linhares </td>
<td headers="duracao_horas" class="gt_row gt_right">2,77</td>
<td headers="distancia_km" class="gt_row gt_right">168,86</td>
<td headers="custo_diarias" class="gt_row gt_right">R$502</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$203</td>
</tr>
<tr>
<td headers="agencia_nome" class="gt_row gt_center">Serra </td>
<td headers="duracao_horas" class="gt_row gt_right">3,72</td>
<td headers="distancia_km" class="gt_row gt_right">236,99</td>
<td headers="custo_diarias" class="gt_row gt_right">R$502</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$284</td>
</tr>
</tbody>
</table>
</div>
<p>Nota-se que outras agências podem realizar a coleta no municípios, e
a qual custo.</p>
</div>
<div class="section level5">
<h5 id="otimizando-a-alocação-de-municípios">Otimizando a alocação de municípios<a class="anchor" aria-label="anchor" href="#otimizando-a-aloca%C3%A7%C3%A3o-de-munic%C3%ADpios"></a>
</h5>
<p>A pergunta que segue, naturalmente, é, há algum município que teria
custos de coleta menores se a coleta fosse realizada por agência
diferente da de jurisdição? A resposta é sim!</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span><span class="op">$</span><span class="va">ucs_agencias_todas</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span>municipio_codigo<span class="op">=</span><span class="va">uc</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>custo_diaria_combustivel<span class="op">=</span><span class="va">custo_diarias</span><span class="op">+</span><span class="va">custo_combustivel</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">custo_diaria_combustivel</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">agencia_codigo_jurisdicao</span><span class="op">!=</span><span class="va">agencia_codigo</span><span class="op">)</span><span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">agencias_now</span>, by<span class="op">=</span><span class="st">"agencia_codigo"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">mnow</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">municipio_codigo</span>,<span class="va">municipio_nome</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="va">ungroup</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute</a></span><span class="op">(</span><span class="va">municipio_nome</span>, <span class="va">agencia_nome</span>, <span class="va">distancia_km</span>, <span class="va">duracao_horas</span>, <span class="va">custo_diarias</span>, <span class="va">custo_combustivel</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">custo_diarias</span><span class="op">+</span><span class="va">custo_combustivel</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span><span class="op">|&gt;</span></span>
<span>  <span class="fu">print_gt</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(municipio_codigo)`</span></span></code></pre></div>
<div id="cfdjagfvsy" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#cfdjagfvsy table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#cfdjagfvsy thead, #cfdjagfvsy tbody, #cfdjagfvsy tfoot, #cfdjagfvsy tr, #cfdjagfvsy td, #cfdjagfvsy th {
  border-style: none;
}

#cfdjagfvsy p {
  margin: 0;
  padding: 0;
}

#cfdjagfvsy .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#cfdjagfvsy .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#cfdjagfvsy .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#cfdjagfvsy .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#cfdjagfvsy .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cfdjagfvsy .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cfdjagfvsy .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cfdjagfvsy .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#cfdjagfvsy .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#cfdjagfvsy .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#cfdjagfvsy .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#cfdjagfvsy .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#cfdjagfvsy .gt_spanner_row {
  border-bottom-style: hidden;
}

#cfdjagfvsy .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#cfdjagfvsy .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#cfdjagfvsy .gt_from_md > :first-child {
  margin-top: 0;
}

#cfdjagfvsy .gt_from_md > :last-child {
  margin-bottom: 0;
}

#cfdjagfvsy .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#cfdjagfvsy .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#cfdjagfvsy .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#cfdjagfvsy .gt_row_group_first td {
  border-top-width: 2px;
}

#cfdjagfvsy .gt_row_group_first th {
  border-top-width: 2px;
}

#cfdjagfvsy .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#cfdjagfvsy .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#cfdjagfvsy .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#cfdjagfvsy .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cfdjagfvsy .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#cfdjagfvsy .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#cfdjagfvsy .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#cfdjagfvsy .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#cfdjagfvsy .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cfdjagfvsy .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cfdjagfvsy .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#cfdjagfvsy .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cfdjagfvsy .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#cfdjagfvsy .gt_left {
  text-align: left;
}

#cfdjagfvsy .gt_center {
  text-align: center;
}

#cfdjagfvsy .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#cfdjagfvsy .gt_font_normal {
  font-weight: normal;
}

#cfdjagfvsy .gt_font_bold {
  font-weight: bold;
}

#cfdjagfvsy .gt_font_italic {
  font-style: italic;
}

#cfdjagfvsy .gt_super {
  font-size: 65%;
}

#cfdjagfvsy .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#cfdjagfvsy .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#cfdjagfvsy .gt_indent_1 {
  text-indent: 5px;
}

#cfdjagfvsy .gt_indent_2 {
  text-indent: 10px;
}

#cfdjagfvsy .gt_indent_3 {
  text-indent: 15px;
}

#cfdjagfvsy .gt_indent_4 {
  text-indent: 20px;
}

#cfdjagfvsy .gt_indent_5 {
  text-indent: 25px;
}

#cfdjagfvsy .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#cfdjagfvsy div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Municipio ">Municipio </th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Agencia ">Agencia </th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Distancia Km">Distancia Km</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Duracao Horas">Duracao Horas</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Custo Diarias">Custo Diarias</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Custo Combustivel">Custo Combustivel</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="municipio_nome" class="gt_row gt_left">Governador Lindenberg</td>
<td headers="agencia_nome" class="gt_row gt_left">Colatina</td>
<td headers="distancia_km" class="gt_row gt_right">50,87</td>
<td headers="duracao_horas" class="gt_row gt_right">1,12</td>
<td headers="custo_diarias" class="gt_row gt_right">R$0</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$122</td>
</tr>
<tr>
<td headers="municipio_nome" class="gt_row gt_left">Presidente Kennedy</td>
<td headers="agencia_nome" class="gt_row gt_left">Cachoeiro de Itapemirim</td>
<td headers="distancia_km" class="gt_row gt_right">38,27</td>
<td headers="duracao_horas" class="gt_row gt_right">0,71</td>
<td headers="custo_diarias" class="gt_row gt_right">R$335</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$92</td>
</tr>
<tr>
<td headers="municipio_nome" class="gt_row gt_left">Itaguaçu</td>
<td headers="agencia_nome" class="gt_row gt_left">Colatina</td>
<td headers="distancia_km" class="gt_row gt_right">54,89</td>
<td headers="duracao_horas" class="gt_row gt_right">0,85</td>
<td headers="custo_diarias" class="gt_row gt_right">R$335</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$132</td>
</tr>
<tr>
<td headers="municipio_nome" class="gt_row gt_left">Itarana</td>
<td headers="agencia_nome" class="gt_row gt_left">Colatina</td>
<td headers="distancia_km" class="gt_row gt_right">66,5</td>
<td headers="duracao_horas" class="gt_row gt_right">1,07</td>
<td headers="custo_diarias" class="gt_row gt_right">R$335</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$160</td>
</tr>
<tr>
<td headers="municipio_nome" class="gt_row gt_left">São Gabriel da Palha</td>
<td headers="agencia_nome" class="gt_row gt_left">Colatina</td>
<td headers="distancia_km" class="gt_row gt_right">79,68</td>
<td headers="duracao_horas" class="gt_row gt_right">1,32</td>
<td headers="custo_diarias" class="gt_row gt_right">R$335</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$191</td>
</tr>
<tr>
<td headers="municipio_nome" class="gt_row gt_left">Laranja da Terra</td>
<td headers="agencia_nome" class="gt_row gt_left">Colatina</td>
<td headers="distancia_km" class="gt_row gt_right">88,22</td>
<td headers="duracao_horas" class="gt_row gt_right">1,45</td>
<td headers="custo_diarias" class="gt_row gt_right">R$335</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$212</td>
</tr>
<tr>
<td headers="municipio_nome" class="gt_row gt_left">Afonso Cláudio</td>
<td headers="agencia_nome" class="gt_row gt_left">Colatina</td>
<td headers="distancia_km" class="gt_row gt_right">111,28</td>
<td headers="duracao_horas" class="gt_row gt_right">1,73</td>
<td headers="custo_diarias" class="gt_row gt_right">R$502</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$134</td>
</tr>
<tr>
<td headers="municipio_nome" class="gt_row gt_left">Ecoporanga</td>
<td headers="agencia_nome" class="gt_row gt_left">São Mateus</td>
<td headers="distancia_km" class="gt_row gt_right">146,89</td>
<td headers="duracao_horas" class="gt_row gt_right">2,62</td>
<td headers="custo_diarias" class="gt_row gt_right">R$502</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$176</td>
</tr>
</tbody>
</table>
</div>
<p>Sabemos que os custos com combustível e diárias estão longe de ser os
únicos fatores para selecionar a agência de coleta. A própria troca de
agência de coleta tem um custo não desprezível. Os funcionários da
agência de jurisdição provavelmente conhecem melhor o município de
coleta, e até na gerência da coleta (que agência mesmo coleta o
município X?) têm custos. Outras possibilidade é a distância em
quilômetros ser menor, mas o tempo de viagem (por conta de qualidade da
estrada, por exemplo) ser maior. O tempo gasto viajando certamente tem
um custo para além das diárias e combustível.</p>
<p>Propomos avaliar o custo de deslocamento como a soma do custo de
diárias, combustível, e custo adicional por hora de viagem
correspondente a R$10. Além disso, só são propostas trocas que
economizariam no mínimo R$100 no custo de deslocamento para o
município.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mudancas</span> <span class="op">&lt;-</span> <span class="va">resultado_ucs</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">mudanca</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">agencias_now</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">agencia_codigo</span>, </span>
<span>                                  <span class="va">agencia_nome</span>,</span>
<span>                                  <span class="va">agencia_lat</span>,</span>
<span>                                  <span class="va">agencia_lon</span><span class="op">)</span>, by<span class="op">=</span><span class="st">"agencia_codigo"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">municipios_22</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>              <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span>uc<span class="op">=</span><span class="va">municipio_codigo</span>, <span class="va">municipio_nome</span>, <span class="va">municipio_sede_lat</span>, <span class="va">municipio_sede_lon</span><span class="op">)</span>, by<span class="op">=</span><span class="st">"uc"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>uc_lat<span class="op">=</span><span class="va">municipio_sede_lat</span>, uc_lon<span class="op">=</span><span class="va">municipio_sede_lon</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">mudancas</span><span class="op">)</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">gt</span><span class="op">(</span></span>
<span>    <span class="va">mudancas</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">agencia_nome</span>, <span class="va">municipio_nome</span>, <span class="va">distancia_km</span>, <span class="va">custo_deslocamento</span>, <span class="va">plano</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"plano"</span><span class="op">)</span>, id_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"municipio_nome"</span><span class="op">)</span>, values_from<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"agencia_nome"</span>, <span class="st">"distancia_km"</span>, <span class="st">"custo_deslocamento"</span><span class="op">)</span><span class="op">)</span><span class="co">#%&gt;%arrange(agencia_nome_otimo)</span></span>
<span>  <span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/cols_label_with.html" class="external-link">cols_label_with</a></span><span class="op">(</span>fn<span class="op">=</span><span class="st">"nomear_colunas"</span><span class="op">)</span><span class="op">|&gt;</span></span>
<span>    <span class="fu">print_gt</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div id="bhaaglvijb" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#bhaaglvijb table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#bhaaglvijb thead, #bhaaglvijb tbody, #bhaaglvijb tfoot, #bhaaglvijb tr, #bhaaglvijb td, #bhaaglvijb th {
  border-style: none;
}

#bhaaglvijb p {
  margin: 0;
  padding: 0;
}

#bhaaglvijb .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#bhaaglvijb .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#bhaaglvijb .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#bhaaglvijb .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#bhaaglvijb .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bhaaglvijb .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bhaaglvijb .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bhaaglvijb .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#bhaaglvijb .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#bhaaglvijb .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#bhaaglvijb .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#bhaaglvijb .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#bhaaglvijb .gt_spanner_row {
  border-bottom-style: hidden;
}

#bhaaglvijb .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#bhaaglvijb .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#bhaaglvijb .gt_from_md > :first-child {
  margin-top: 0;
}

#bhaaglvijb .gt_from_md > :last-child {
  margin-bottom: 0;
}

#bhaaglvijb .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#bhaaglvijb .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#bhaaglvijb .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#bhaaglvijb .gt_row_group_first td {
  border-top-width: 2px;
}

#bhaaglvijb .gt_row_group_first th {
  border-top-width: 2px;
}

#bhaaglvijb .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bhaaglvijb .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#bhaaglvijb .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#bhaaglvijb .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bhaaglvijb .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bhaaglvijb .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#bhaaglvijb .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#bhaaglvijb .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#bhaaglvijb .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bhaaglvijb .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bhaaglvijb .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bhaaglvijb .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bhaaglvijb .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bhaaglvijb .gt_left {
  text-align: left;
}

#bhaaglvijb .gt_center {
  text-align: center;
}

#bhaaglvijb .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#bhaaglvijb .gt_font_normal {
  font-weight: normal;
}

#bhaaglvijb .gt_font_bold {
  font-weight: bold;
}

#bhaaglvijb .gt_font_italic {
  font-style: italic;
}

#bhaaglvijb .gt_super {
  font-size: 65%;
}

#bhaaglvijb .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#bhaaglvijb .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#bhaaglvijb .gt_indent_1 {
  text-indent: 5px;
}

#bhaaglvijb .gt_indent_2 {
  text-indent: 10px;
}

#bhaaglvijb .gt_indent_3 {
  text-indent: 15px;
}

#bhaaglvijb .gt_indent_4 {
  text-indent: 20px;
}

#bhaaglvijb .gt_indent_5 {
  text-indent: 25px;
}

#bhaaglvijb .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#bhaaglvijb div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Municipio">Municipio</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Agencia Otimo">Agencia Otimo</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Agencia Jurisdicao">Agencia Jurisdicao</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Distancia Km Otimo">Distancia Km Otimo</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Distancia Km Jurisdicao">Distancia Km Jurisdicao</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Custo Deslocamento Otimo">Custo Deslocamento Otimo</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Custo Deslocamento Jurisdicao">Custo Deslocamento Jurisdicao</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="municipio_nome" class="gt_row gt_left">Presidente Kennedy</td>
<td headers="agencia_nome_otimo" class="gt_row gt_left">Cachoeiro de Itapemirim</td>
<td headers="agencia_nome_jurisdicao" class="gt_row gt_left">Guarapari</td>
<td headers="distancia_km_otimo" class="gt_row gt_right">38,27</td>
<td headers="distancia_km_jurisdicao" class="gt_row gt_right">113,37</td>
<td headers="custo_deslocamento_otimo" class="gt_row gt_right">R$455</td>
<td headers="custo_deslocamento_jurisdicao" class="gt_row gt_right">R$676</td>
</tr>
<tr>
<td headers="municipio_nome" class="gt_row gt_left">Itaguaçu</td>
<td headers="agencia_nome_otimo" class="gt_row gt_left">Colatina</td>
<td headers="agencia_nome_jurisdicao" class="gt_row gt_left">Cariacica</td>
<td headers="distancia_km_otimo" class="gt_row gt_right">54,89</td>
<td headers="distancia_km_jurisdicao" class="gt_row gt_right">119,31</td>
<td headers="custo_deslocamento_otimo" class="gt_row gt_right">R$501</td>
<td headers="custo_deslocamento_jurisdicao" class="gt_row gt_right">R$683</td>
</tr>
<tr>
<td headers="municipio_nome" class="gt_row gt_left">Itarana</td>
<td headers="agencia_nome_otimo" class="gt_row gt_left">Colatina</td>
<td headers="agencia_nome_jurisdicao" class="gt_row gt_left">Cariacica</td>
<td headers="distancia_km_otimo" class="gt_row gt_right">66,5</td>
<td headers="distancia_km_jurisdicao" class="gt_row gt_right">108,73</td>
<td headers="custo_deslocamento_otimo" class="gt_row gt_right">R$537</td>
<td headers="custo_deslocamento_jurisdicao" class="gt_row gt_right">R$668</td>
</tr>
<tr>
<td headers="municipio_nome" class="gt_row gt_left">Laranja da Terra</td>
<td headers="agencia_nome_otimo" class="gt_row gt_left">Colatina</td>
<td headers="agencia_nome_jurisdicao" class="gt_row gt_left">Cachoeiro de Itapemirim</td>
<td headers="distancia_km_otimo" class="gt_row gt_right">88,22</td>
<td headers="distancia_km_jurisdicao" class="gt_row gt_right">153,06</td>
<td headers="custo_deslocamento_otimo" class="gt_row gt_right">R$605</td>
<td headers="custo_deslocamento_jurisdicao" class="gt_row gt_right">R$738</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">mudancas</span><span class="op">)</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span><span class="va">mudancas_l</span> <span class="op">&lt;-</span> <span class="va">mudancas</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_split.html" class="external-link">group_split</a></span><span class="op">(</span><span class="va">municipio_nome</span><span class="op">)</span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">mudancas_l</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">dnow</span> <span class="op">&lt;-</span> <span class="va">mudancas_l</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">plano</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>title<span class="op">=</span><span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"{municipio_nome}:\n.  de {agencia_nome[1]}\n   para {agencia_nome[2]}"</span><span class="op">)</span>,</span>
<span>    subtitle<span class="op">=</span><span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"{agencia_nome}: {round(distancia_km)} km (R$ {round(custo_deslocamento)})"</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/map_uc_agencias.html">map_uc_agencias</a></span><span class="op">(</span><span class="va">dnow</span><span class="op">)</span> <span class="op">+</span></span>
<span>      <span class="fu">geom_label</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">municipio_sede_lon</span>, y<span class="op">=</span><span class="va">municipio_sede_lat</span>, label<span class="op">=</span><span class="va">municipio_nome</span><span class="op">)</span>, data<span class="op">=</span><span class="va">dnow</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span>, size<span class="op">=</span><span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>      <span class="fu">geom_label</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">agencia_lon</span>, y<span class="op">=</span><span class="va">agencia_lat</span>, label<span class="op">=</span><span class="va">agencia_nome</span><span class="op">)</span>, data<span class="op">=</span><span class="va">dnow</span>, size<span class="op">=</span><span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>      <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="va">dnow</span><span class="op">$</span><span class="va">title</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">dnow</span><span class="op">$</span><span class="va">subtitle</span>, collapse<span class="op">=</span><span class="st">'\n'</span><span class="op">)</span>, x<span class="op">=</span><span class="st">""</span>,y<span class="op">=</span><span class="st">""</span><span class="op">)</span><span class="op">+</span></span>
<span>      <span class="fu">guides</span><span class="op">(</span>color<span class="op">=</span><span class="st">"none"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><img src="orce_files/figure-html/unnamed-chunk-17-1.png" width="70%" style="display: block; margin: auto;"><img src="orce_files/figure-html/unnamed-chunk-17-2.png" width="70%" style="display: block; margin: auto;"><img src="orce_files/figure-html/unnamed-chunk-17-3.png" width="70%" style="display: block; margin: auto;"><img src="orce_files/figure-html/unnamed-chunk-17-4.png" width="70%" style="display: block; margin: auto;"></p>
</div>
<div class="section level5">
<h5 id="resumo-da-otimização">Resumo da otimização<a class="anchor" aria-label="anchor" href="#resumo-da-otimiza%C3%A7%C3%A3o"></a>
</h5>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">resultado_ucs</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute</a></span><span class="op">(</span><span class="va">agencia_codigo</span>, <span class="va">custo_diarias</span>, <span class="va">custo_combustivel</span>, <span class="va">custo_horas_viagem</span>, total<span class="op">=</span><span class="va">custo_deslocamento</span>, <span class="va">plano</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">plano</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/where.html" class="external-link">where</a></span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, <span class="va">sum</span><span class="op">)</span>, n_agencias<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html" class="external-link">n_distinct</a></span><span class="op">(</span><span class="va">agencia_codigo</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span>cols<span class="op">=</span><span class="op">-</span><span class="va">plano</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from<span class="op">=</span><span class="va">plano</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>reducao<span class="op">=</span><span class="va">jurisdicao</span><span class="op">-</span><span class="va">otimo</span>,</span>
<span>         reducao_pct<span class="op">=</span><span class="fl">1</span><span class="op">-</span><span class="va">otimo</span><span class="op">/</span><span class="va">jurisdicao</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">resumo_planos</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">resumo_planos</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">print_gt</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="fglzvnegsl" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#fglzvnegsl table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#fglzvnegsl thead, #fglzvnegsl tbody, #fglzvnegsl tfoot, #fglzvnegsl tr, #fglzvnegsl td, #fglzvnegsl th {
  border-style: none;
}

#fglzvnegsl p {
  margin: 0;
  padding: 0;
}

#fglzvnegsl .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#fglzvnegsl .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#fglzvnegsl .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#fglzvnegsl .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#fglzvnegsl .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fglzvnegsl .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fglzvnegsl .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fglzvnegsl .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#fglzvnegsl .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#fglzvnegsl .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#fglzvnegsl .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#fglzvnegsl .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#fglzvnegsl .gt_spanner_row {
  border-bottom-style: hidden;
}

#fglzvnegsl .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#fglzvnegsl .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#fglzvnegsl .gt_from_md > :first-child {
  margin-top: 0;
}

#fglzvnegsl .gt_from_md > :last-child {
  margin-bottom: 0;
}

#fglzvnegsl .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#fglzvnegsl .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#fglzvnegsl .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#fglzvnegsl .gt_row_group_first td {
  border-top-width: 2px;
}

#fglzvnegsl .gt_row_group_first th {
  border-top-width: 2px;
}

#fglzvnegsl .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fglzvnegsl .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#fglzvnegsl .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#fglzvnegsl .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fglzvnegsl .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fglzvnegsl .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#fglzvnegsl .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#fglzvnegsl .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#fglzvnegsl .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fglzvnegsl .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fglzvnegsl .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fglzvnegsl .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fglzvnegsl .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fglzvnegsl .gt_left {
  text-align: left;
}

#fglzvnegsl .gt_center {
  text-align: center;
}

#fglzvnegsl .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#fglzvnegsl .gt_font_normal {
  font-weight: normal;
}

#fglzvnegsl .gt_font_bold {
  font-weight: bold;
}

#fglzvnegsl .gt_font_italic {
  font-style: italic;
}

#fglzvnegsl .gt_super {
  font-size: 65%;
}

#fglzvnegsl .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#fglzvnegsl .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#fglzvnegsl .gt_indent_1 {
  text-indent: 5px;
}

#fglzvnegsl .gt_indent_2 {
  text-indent: 10px;
}

#fglzvnegsl .gt_indent_3 {
  text-indent: 15px;
}

#fglzvnegsl .gt_indent_4 {
  text-indent: 20px;
}

#fglzvnegsl .gt_indent_5 {
  text-indent: 25px;
}

#fglzvnegsl .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#fglzvnegsl div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Name">Name</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Jurisdicao">Jurisdicao</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Otimo">Otimo</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Reducao">Reducao</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Reducao Pct">Reducao Pct</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="name" class="gt_row gt_left">custo_diarias</td>
<td headers="jurisdicao" class="gt_row gt_right">8.040</td>
<td headers="otimo" class="gt_row gt_right">7.370</td>
<td headers="reducao" class="gt_row gt_right">670</td>
<td headers="reducao_pct" class="gt_row gt_right">8,3%</td>
</tr>
<tr>
<td headers="name" class="gt_row gt_left">custo_combustivel</td>
<td headers="jurisdicao" class="gt_row gt_right">8.917,2</td>
<td headers="otimo" class="gt_row gt_right">8.918,75</td>
<td headers="reducao" class="gt_row gt_right">−1,55</td>
<td headers="reducao_pct" class="gt_row gt_right">−0,0%</td>
</tr>
<tr>
<td headers="name" class="gt_row gt_left">custo_horas_viagem</td>
<td headers="jurisdicao" class="gt_row gt_right">2.531,6</td>
<td headers="otimo" class="gt_row gt_right">2.532,8</td>
<td headers="reducao" class="gt_row gt_right">−1,2</td>
<td headers="reducao_pct" class="gt_row gt_right">−0,0%</td>
</tr>
<tr>
<td headers="name" class="gt_row gt_left">total</td>
<td headers="jurisdicao" class="gt_row gt_right">19.488,8</td>
<td headers="otimo" class="gt_row gt_right">18.821,55</td>
<td headers="reducao" class="gt_row gt_right">667,25</td>
<td headers="reducao_pct" class="gt_row gt_right">3,4%</td>
</tr>
<tr>
<td headers="name" class="gt_row gt_left">n_agencias</td>
<td headers="jurisdicao" class="gt_row gt_right">10</td>
<td headers="otimo" class="gt_row gt_right">10</td>
<td headers="reducao" class="gt_row gt_right">0</td>
<td headers="reducao_pct" class="gt_row gt_right">0,0%</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">economia_diarias</span> <span class="op">&lt;-</span> <span class="va">resumo_planos</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">name</span><span class="op">==</span><span class="st">"custo_diarias"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">reducao_pct</span><span class="op">)</span></span>
<span><span class="va">economia_combustivel</span> <span class="op">&lt;-</span> <span class="va">resumo_planos</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">name</span><span class="op">==</span><span class="st">"custo_combustivel"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">reducao_pct</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">economia_combustivel</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">economia_combustivel_str</span> <span class="op">&lt;-</span>   <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"{round(economia_combustivel*100,1)}% a **menos**"</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">economia_combustivel</span><span class="op">&lt;</span><span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">economia_combustivel_str</span> <span class="op">&lt;-</span>  <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"apenas {-round(economia_combustivel*100,1)}% a mais"</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="va">economia_combustivel_str</span> <span class="op">&lt;-</span> <span class="st">"o mesmo valor"</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Utilizando o plano otimizado, com 4 alterações de agência de coleta,
é possível economizar 8% no valor das diárias, gastando o mesmo valor em
combustível.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ufs_sem_missing_dist</span> <span class="op">&lt;-</span> <span class="va">distancias_agencias_municipios_osrm</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span>uf_codigo<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">agencia_codigo</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">distancia_km</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">uf_codigo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">uf_codigo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">ufs_sem_missing_dist</span> <span class="op">&lt;-</span> <span class="va">ufs_sem_missing_dist</span><span class="op">[</span><span class="va">ufs_sem_missing_dist</span><span class="op">!=</span><span class="fl">53</span><span class="op">]</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="resultados-para-outras-superintendências-estaduais">Resultados para outras Superintendências Estaduais<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Foram excluídas Superintendências Estaduais onde não há
rotas rodoviárias para todos os municípios: Amazônas, Pará, Distrito
Federal&lt;/p&gt;"><sup>1</sup></a><a class="anchor" aria-label="anchor" href="#resultados-para-outras-superintend%C3%AAncias-estaduais"></a>
</h4>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">filter_uf</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">x</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">agencia_codigo</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">==</span><span class="va">ufnow</span><span class="op">$</span><span class="va">uf_codigo</span>, </span>
<span>           <span class="op">!</span><span class="va">agencia_codigo</span><span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"130420300"</span>,<span class="st">"130140700"</span><span class="op">)</span>,</span>
<span>           <span class="op">!</span><span class="va">municipio_codigo</span><span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1300300"</span>, <span class="st">"1301001"</span>, <span class="st">"1301407"</span>, <span class="st">"1301951"</span>, <span class="st">"1303106"</span>, <span class="st">"1304203"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span></span>
<span><span class="va">res_ufs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">vector</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"list"</span>, length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">ufs_sem_missing_dist</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">res_ufs</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">ufs_sem_missing_dist</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">uf_codigo_now</span> <span class="kw">in</span> <span class="va">ufs_sem_missing_dist</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">params_uf</span> <span class="op">&lt;-</span> <span class="va">params_munic</span></span>
<span>  <span class="va">ufnow</span> <span class="op">&lt;-</span> <span class="va">ufs</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">uf_codigo</span><span class="op">==</span><span class="va">uf_codigo_now</span><span class="op">)</span></span>
<span>  <span class="va">distancias_ucs</span> <span class="op">&lt;-</span> <span class="va">distancias_agencias_municipios_osrm</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">agencias_municipios_diaria_now</span>,</span>
<span>              by <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/join_by.html" class="external-link">join_by</a></span><span class="op">(</span><span class="va">agencia_codigo</span>, <span class="va">municipio_codigo</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>uc<span class="op">=</span><span class="va">municipio_codigo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu">filter_uf</span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">distancias_ucs</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">distancia_km</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">==</span><span class="fl">0</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">ucs_now</span> <span class="op">&lt;-</span> <span class="va">distancias_ucs</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">municipio_codigo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">agencias_bdo_mun</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">agencia_codigo</span>, <span class="va">municipio_codigo</span><span class="op">)</span>, by<span class="op">=</span><span class="st">"municipio_codigo"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>uc<span class="op">=</span><span class="va">municipio_codigo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="co">## com agências intramunicipais tem mais de uma agência associada a município</span></span>
<span>    <span class="co">## vamos deixar só a primeira (em ordem numérica)</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">municipio_codigo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">agencia_codigo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>viagens<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">viagens_munic</span>, dias_coleta<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">dias_coleta_munic</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu">filter_uf</span><span class="op">(</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">params_munic</span><span class="op">$</span><span class="va">agencias</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span>  <span class="va">params_munic</span><span class="op">$</span><span class="va">distancias_ucs</span> <span class="op">&lt;-</span> <span class="va">distancias_ucs</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>diaria_pernoite<span class="op">=</span><span class="va">duracao_horas</span><span class="op">&gt;</span><span class="va">params</span><span class="op">$</span><span class="va">horas_viagem_pernoite</span><span class="op">)</span></span>
<span>  <span class="va">params_munic</span><span class="op">$</span><span class="va">ucs</span> <span class="op">&lt;-</span> <span class="va">ucs_now</span></span>
<span>  <span class="va">params_munic</span><span class="op">$</span><span class="va">resultado_completo</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span></span>
<span>  <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span>what <span class="op">=</span> <span class="va">alocar_ucs</span>, </span>
<span>                 args<span class="op">=</span><span class="va">params_munic</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">resultado_ucs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span></span>
<span>    <span class="va">res</span><span class="op">$</span><span class="va">resultado_ucs_otimo</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>plano<span class="op">=</span> <span class="st">"otimo"</span><span class="op">)</span>,</span>
<span>    <span class="va">res</span><span class="op">$</span><span class="va">resultado_ucs_jurisdicao</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>plano<span class="op">=</span> <span class="st">"jurisdicao"</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">uc</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>mudanca<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">agencia_codigo</span><span class="op">)</span><span class="op">)</span><span class="op">&gt;</span><span class="fl">1</span><span class="op">)</span></span>
<span>  </span>
<span>   </span>
<span>  <span class="va">resultado_ucs</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute</a></span><span class="op">(</span><span class="va">agencia_codigo</span>, <span class="va">custo_diarias</span>, <span class="va">custo_combustivel</span>, <span class="va">custo_horas_viagem</span>, total<span class="op">=</span><span class="va">custo_deslocamento</span>, <span class="va">plano</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">plano</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/where.html" class="external-link">where</a></span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, <span class="va">sum</span><span class="op">)</span>, n_agencias<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html" class="external-link">n_distinct</a></span><span class="op">(</span><span class="va">agencia_codigo</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span>cols<span class="op">=</span><span class="op">-</span><span class="va">plano</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from<span class="op">=</span><span class="va">plano</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>reducao<span class="op">=</span><span class="va">jurisdicao</span><span class="op">-</span><span class="va">otimo</span>,</span>
<span>           reducao_pct<span class="op">=</span><span class="fl">1</span><span class="op">-</span><span class="va">otimo</span><span class="op">/</span><span class="va">jurisdicao</span>,uf_codigo<span class="op">=</span><span class="va">uf_codigo_now</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">resumo_planos</span></span>
<span>  <span class="va">res_ufs</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">uf_codigo_now</span><span class="op">)</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">resumo_planos</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">res_ufs_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">res_ufs</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">name</span><span class="op">==</span><span class="st">"total"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">ufs</span>, by<span class="op">=</span><span class="st">"uf_codigo"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">res_ufs_df</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="va">ungroup</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">regiao_nome</span>, <span class="va">uf_nome</span>, <span class="va">jurisdicao</span>, <span class="va">otimo</span>, <span class="va">reducao</span>, <span class="va">reducao_pct</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">regiao_nome</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">reducao</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">regiao_nome</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">gt</span><span class="op">(</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/summary_rows.html" class="external-link">summary_rows</a></span><span class="op">(</span>fns<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>fn<span class="op">=</span><span class="st">"sum"</span>, label<span class="op">=</span><span class="st">"Total da Região"</span><span class="op">)</span>, columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"jurisdicao"</span>, <span class="st">"otimo"</span>, <span class="st">"reducao"</span><span class="op">)</span>, fmt <span class="op">=</span> <span class="op">~</span><span class="fu">fmt_nums</span><span class="op">(</span><span class="va">.x</span>, decimal_num <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/grand_summary_rows.html" class="external-link">grand_summary_rows</a></span><span class="op">(</span>fns<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>fn<span class="op">=</span><span class="st">'sum'</span>, label<span class="op">=</span><span class="st">"Total Brasil"</span><span class="op">)</span>, columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"jurisdicao"</span>, <span class="st">"otimo"</span>, <span class="st">"reducao"</span><span class="op">)</span>,fmt <span class="op">=</span> <span class="op">~</span><span class="fu">fmt_nums</span><span class="op">(</span><span class="va">.x</span>, decimal_num <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/cols_label.html" class="external-link">cols_label</a></span><span class="op">(</span>uf_nome<span class="op">=</span><span class="st">""</span>, jurisdicao<span class="op">=</span><span class="st">"Jurisdição (R$)"</span>, otimo<span class="op">=</span><span class="st">"Ótimo (R$)"</span>, reducao<span class="op">=</span><span class="st">"Redução (R$)"</span>, reducao_pct<span class="op">=</span><span class="st">"Redução (%)"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">print_gt</span><span class="op">(</span>decimal_num<span class="op">=</span><span class="fl">0</span>, processar_nomes_colunas <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div id="qeqmfaamre" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#qeqmfaamre table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#qeqmfaamre thead, #qeqmfaamre tbody, #qeqmfaamre tfoot, #qeqmfaamre tr, #qeqmfaamre td, #qeqmfaamre th {
  border-style: none;
}

#qeqmfaamre p {
  margin: 0;
  padding: 0;
}

#qeqmfaamre .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qeqmfaamre .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#qeqmfaamre .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qeqmfaamre .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qeqmfaamre .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qeqmfaamre .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qeqmfaamre .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qeqmfaamre .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qeqmfaamre .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qeqmfaamre .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qeqmfaamre .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qeqmfaamre .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qeqmfaamre .gt_spanner_row {
  border-bottom-style: hidden;
}

#qeqmfaamre .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#qeqmfaamre .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qeqmfaamre .gt_from_md > :first-child {
  margin-top: 0;
}

#qeqmfaamre .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qeqmfaamre .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qeqmfaamre .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#qeqmfaamre .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qeqmfaamre .gt_row_group_first td {
  border-top-width: 2px;
}

#qeqmfaamre .gt_row_group_first th {
  border-top-width: 2px;
}

#qeqmfaamre .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qeqmfaamre .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#qeqmfaamre .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qeqmfaamre .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qeqmfaamre .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qeqmfaamre .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qeqmfaamre .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#qeqmfaamre .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qeqmfaamre .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qeqmfaamre .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qeqmfaamre .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qeqmfaamre .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qeqmfaamre .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qeqmfaamre .gt_left {
  text-align: left;
}

#qeqmfaamre .gt_center {
  text-align: center;
}

#qeqmfaamre .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qeqmfaamre .gt_font_normal {
  font-weight: normal;
}

#qeqmfaamre .gt_font_bold {
  font-weight: bold;
}

#qeqmfaamre .gt_font_italic {
  font-style: italic;
}

#qeqmfaamre .gt_super {
  font-size: 65%;
}

#qeqmfaamre .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#qeqmfaamre .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qeqmfaamre .gt_indent_1 {
  text-indent: 5px;
}

#qeqmfaamre .gt_indent_2 {
  text-indent: 10px;
}

#qeqmfaamre .gt_indent_3 {
  text-indent: 15px;
}

#qeqmfaamre .gt_indent_4 {
  text-indent: 20px;
}

#qeqmfaamre .gt_indent_5 {
  text-indent: 25px;
}

#qeqmfaamre .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#qeqmfaamre div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id=""></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id=""></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Jurisdição (R$)">Jurisdição (R$)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Ótimo (R$)">Ótimo (R$)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Redução (R$)">Redução (R$)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Redução (%)">Redução (%)</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Centro Oeste">Centro Oeste</th>
    </tr>
<tr class="gt_row_group_first">
<th id="stub_1_1" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Centro Oeste stub_1_1 uf_nome" class="gt_row gt_left">Goiás</td>
<td headers="Centro Oeste stub_1_1 jurisdicao" class="gt_row gt_right">78.312</td>
<td headers="Centro Oeste stub_1_1 otimo" class="gt_row gt_right">74.151</td>
<td headers="Centro Oeste stub_1_1 reducao" class="gt_row gt_right">4.161</td>
<td headers="Centro Oeste stub_1_1 reducao_pct" class="gt_row gt_right">5,3%</td>
</tr>
<tr>
<th id="stub_1_2" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Centro Oeste stub_1_2 uf_nome" class="gt_row gt_left">Mato Grosso</td>
<td headers="Centro Oeste stub_1_2 jurisdicao" class="gt_row gt_right">69.773</td>
<td headers="Centro Oeste stub_1_2 otimo" class="gt_row gt_right">67.477</td>
<td headers="Centro Oeste stub_1_2 reducao" class="gt_row gt_right">2.297</td>
<td headers="Centro Oeste stub_1_2 reducao_pct" class="gt_row gt_right">3,3%</td>
</tr>
<tr>
<th id="stub_1_3" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Centro Oeste stub_1_3 uf_nome" class="gt_row gt_left">Mato Grosso do Sul</td>
<td headers="Centro Oeste stub_1_3 jurisdicao" class="gt_row gt_right">24.675</td>
<td headers="Centro Oeste stub_1_3 otimo" class="gt_row gt_right">24.140</td>
<td headers="Centro Oeste stub_1_3 reducao" class="gt_row gt_right">535</td>
<td headers="Centro Oeste stub_1_3 reducao_pct" class="gt_row gt_right">2,2%</td>
</tr>
<tr>
<th id="summary_stub_Centro Oeste_1" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_first_summary_row thick gt_last_summary_row">Total da Região</th>
<td headers="Centro Oeste summary_stub_Centro Oeste_1 uf_nome" class="gt_row gt_left gt_summary_row gt_first_summary_row thick gt_last_summary_row">—</td>
<td headers="Centro Oeste summary_stub_Centro Oeste_1 jurisdicao" class="gt_row gt_right gt_summary_row gt_first_summary_row thick gt_last_summary_row">172.761</td>
<td headers="Centro Oeste summary_stub_Centro Oeste_1 otimo" class="gt_row gt_right gt_summary_row gt_first_summary_row thick gt_last_summary_row">165.768</td>
<td headers="Centro Oeste summary_stub_Centro Oeste_1 reducao" class="gt_row gt_right gt_summary_row gt_first_summary_row thick gt_last_summary_row">6.993</td>
<td headers="Centro Oeste summary_stub_Centro Oeste_1 reducao_pct" class="gt_row gt_right gt_summary_row gt_first_summary_row thick gt_last_summary_row">—</td>
</tr>
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Nordeste">Nordeste</th>
    </tr>
<tr class="gt_row_group_first">
<th id="stub_1_4" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Nordeste stub_1_4 uf_nome" class="gt_row gt_left">Bahia</td>
<td headers="Nordeste stub_1_4 jurisdicao" class="gt_row gt_right">97.099</td>
<td headers="Nordeste stub_1_4 otimo" class="gt_row gt_right">91.748</td>
<td headers="Nordeste stub_1_4 reducao" class="gt_row gt_right">5.352</td>
<td headers="Nordeste stub_1_4 reducao_pct" class="gt_row gt_right">5,5%</td>
</tr>
<tr>
<th id="stub_1_5" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Nordeste stub_1_5 uf_nome" class="gt_row gt_left">Maranhão</td>
<td headers="Nordeste stub_1_5 jurisdicao" class="gt_row gt_right">71.841</td>
<td headers="Nordeste stub_1_5 otimo" class="gt_row gt_right">68.103</td>
<td headers="Nordeste stub_1_5 reducao" class="gt_row gt_right">3.737</td>
<td headers="Nordeste stub_1_5 reducao_pct" class="gt_row gt_right">5,2%</td>
</tr>
<tr>
<th id="stub_1_6" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Nordeste stub_1_6 uf_nome" class="gt_row gt_left">Piauí</td>
<td headers="Nordeste stub_1_6 jurisdicao" class="gt_row gt_right">71.613</td>
<td headers="Nordeste stub_1_6 otimo" class="gt_row gt_right">69.710</td>
<td headers="Nordeste stub_1_6 reducao" class="gt_row gt_right">1.903</td>
<td headers="Nordeste stub_1_6 reducao_pct" class="gt_row gt_right">2,7%</td>
</tr>
<tr>
<th id="stub_1_7" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Nordeste stub_1_7 uf_nome" class="gt_row gt_left">Rio Grande do Norte</td>
<td headers="Nordeste stub_1_7 jurisdicao" class="gt_row gt_right">26.727</td>
<td headers="Nordeste stub_1_7 otimo" class="gt_row gt_right">25.322</td>
<td headers="Nordeste stub_1_7 reducao" class="gt_row gt_right">1.404</td>
<td headers="Nordeste stub_1_7 reducao_pct" class="gt_row gt_right">5,3%</td>
</tr>
<tr>
<th id="stub_1_8" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Nordeste stub_1_8 uf_nome" class="gt_row gt_left">Ceará</td>
<td headers="Nordeste stub_1_8 jurisdicao" class="gt_row gt_right">42.860</td>
<td headers="Nordeste stub_1_8 otimo" class="gt_row gt_right">41.644</td>
<td headers="Nordeste stub_1_8 reducao" class="gt_row gt_right">1.216</td>
<td headers="Nordeste stub_1_8 reducao_pct" class="gt_row gt_right">2,8%</td>
</tr>
<tr>
<th id="stub_1_9" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Nordeste stub_1_9 uf_nome" class="gt_row gt_left">Paraíba</td>
<td headers="Nordeste stub_1_9 jurisdicao" class="gt_row gt_right">38.651</td>
<td headers="Nordeste stub_1_9 otimo" class="gt_row gt_right">38.178</td>
<td headers="Nordeste stub_1_9 reducao" class="gt_row gt_right">473</td>
<td headers="Nordeste stub_1_9 reducao_pct" class="gt_row gt_right">1,2%</td>
</tr>
<tr>
<th id="stub_1_10" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Nordeste stub_1_10 uf_nome" class="gt_row gt_left">Pernambuco</td>
<td headers="Nordeste stub_1_10 jurisdicao" class="gt_row gt_right">27.336</td>
<td headers="Nordeste stub_1_10 otimo" class="gt_row gt_right">27.009</td>
<td headers="Nordeste stub_1_10 reducao" class="gt_row gt_right">327</td>
<td headers="Nordeste stub_1_10 reducao_pct" class="gt_row gt_right">1,2%</td>
</tr>
<tr>
<th id="stub_1_11" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Nordeste stub_1_11 uf_nome" class="gt_row gt_left">Alagoas</td>
<td headers="Nordeste stub_1_11 jurisdicao" class="gt_row gt_right">10.327</td>
<td headers="Nordeste stub_1_11 otimo" class="gt_row gt_right">10.002</td>
<td headers="Nordeste stub_1_11 reducao" class="gt_row gt_right">324</td>
<td headers="Nordeste stub_1_11 reducao_pct" class="gt_row gt_right">3,1%</td>
</tr>
<tr>
<th id="stub_1_12" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Nordeste stub_1_12 uf_nome" class="gt_row gt_left">Sergipe</td>
<td headers="Nordeste stub_1_12 jurisdicao" class="gt_row gt_right">9.363</td>
<td headers="Nordeste stub_1_12 otimo" class="gt_row gt_right">9.231</td>
<td headers="Nordeste stub_1_12 reducao" class="gt_row gt_right">132</td>
<td headers="Nordeste stub_1_12 reducao_pct" class="gt_row gt_right">1,4%</td>
</tr>
<tr>
<th id="summary_stub_Nordeste_1" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_first_summary_row thick gt_last_summary_row">Total da Região</th>
<td headers="Nordeste summary_stub_Nordeste_1 uf_nome" class="gt_row gt_left gt_summary_row gt_first_summary_row thick gt_last_summary_row">—</td>
<td headers="Nordeste summary_stub_Nordeste_1 jurisdicao" class="gt_row gt_right gt_summary_row gt_first_summary_row thick gt_last_summary_row">395.816</td>
<td headers="Nordeste summary_stub_Nordeste_1 otimo" class="gt_row gt_right gt_summary_row gt_first_summary_row thick gt_last_summary_row">380.948</td>
<td headers="Nordeste summary_stub_Nordeste_1 reducao" class="gt_row gt_right gt_summary_row gt_first_summary_row thick gt_last_summary_row">14.868</td>
<td headers="Nordeste summary_stub_Nordeste_1 reducao_pct" class="gt_row gt_right gt_summary_row gt_first_summary_row thick gt_last_summary_row">—</td>
</tr>
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Norte">Norte</th>
    </tr>
<tr class="gt_row_group_first">
<th id="stub_1_13" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Norte stub_1_13 uf_nome" class="gt_row gt_left">Tocantins</td>
<td headers="Norte stub_1_13 jurisdicao" class="gt_row gt_right">58.107</td>
<td headers="Norte stub_1_13 otimo" class="gt_row gt_right">57.074</td>
<td headers="Norte stub_1_13 reducao" class="gt_row gt_right">1.033</td>
<td headers="Norte stub_1_13 reducao_pct" class="gt_row gt_right">1,8%</td>
</tr>
<tr>
<th id="stub_1_14" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Norte stub_1_14 uf_nome" class="gt_row gt_left">Acre</td>
<td headers="Norte stub_1_14 jurisdicao" class="gt_row gt_right">10.562</td>
<td headers="Norte stub_1_14 otimo" class="gt_row gt_right">9.959</td>
<td headers="Norte stub_1_14 reducao" class="gt_row gt_right">602</td>
<td headers="Norte stub_1_14 reducao_pct" class="gt_row gt_right">5,7%</td>
</tr>
<tr>
<th id="stub_1_15" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Norte stub_1_15 uf_nome" class="gt_row gt_left">Rondônia</td>
<td headers="Norte stub_1_15 jurisdicao" class="gt_row gt_right">23.711</td>
<td headers="Norte stub_1_15 otimo" class="gt_row gt_right">23.314</td>
<td headers="Norte stub_1_15 reducao" class="gt_row gt_right">397</td>
<td headers="Norte stub_1_15 reducao_pct" class="gt_row gt_right">1,7%</td>
</tr>
<tr>
<th id="stub_1_16" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Norte stub_1_16 uf_nome" class="gt_row gt_left">Roraima</td>
<td headers="Norte stub_1_16 jurisdicao" class="gt_row gt_right">9.806</td>
<td headers="Norte stub_1_16 otimo" class="gt_row gt_right">9.806</td>
<td headers="Norte stub_1_16 reducao" class="gt_row gt_right">0</td>
<td headers="Norte stub_1_16 reducao_pct" class="gt_row gt_right">0,0%</td>
</tr>
<tr>
<th id="stub_1_17" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Norte stub_1_17 uf_nome" class="gt_row gt_left">Amapá</td>
<td headers="Norte stub_1_17 jurisdicao" class="gt_row gt_right">11.193</td>
<td headers="Norte stub_1_17 otimo" class="gt_row gt_right">11.193</td>
<td headers="Norte stub_1_17 reducao" class="gt_row gt_right">0</td>
<td headers="Norte stub_1_17 reducao_pct" class="gt_row gt_right">0,0%</td>
</tr>
<tr>
<th id="summary_stub_Norte_1" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_first_summary_row thick gt_last_summary_row">Total da Região</th>
<td headers="Norte summary_stub_Norte_1 uf_nome" class="gt_row gt_left gt_summary_row gt_first_summary_row thick gt_last_summary_row">—</td>
<td headers="Norte summary_stub_Norte_1 jurisdicao" class="gt_row gt_right gt_summary_row gt_first_summary_row thick gt_last_summary_row">113.379</td>
<td headers="Norte summary_stub_Norte_1 otimo" class="gt_row gt_right gt_summary_row gt_first_summary_row thick gt_last_summary_row">111.347</td>
<td headers="Norte summary_stub_Norte_1 reducao" class="gt_row gt_right gt_summary_row gt_first_summary_row thick gt_last_summary_row">2.032</td>
<td headers="Norte summary_stub_Norte_1 reducao_pct" class="gt_row gt_right gt_summary_row gt_first_summary_row thick gt_last_summary_row">—</td>
</tr>
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Sudeste">Sudeste</th>
    </tr>
<tr class="gt_row_group_first">
<th id="stub_1_18" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Sudeste stub_1_18 uf_nome" class="gt_row gt_left">Minas Gerais</td>
<td headers="Sudeste stub_1_18 jurisdicao" class="gt_row gt_right">182.764</td>
<td headers="Sudeste stub_1_18 otimo" class="gt_row gt_right">178.514</td>
<td headers="Sudeste stub_1_18 reducao" class="gt_row gt_right">4.251</td>
<td headers="Sudeste stub_1_18 reducao_pct" class="gt_row gt_right">2,3%</td>
</tr>
<tr>
<th id="stub_1_19" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Sudeste stub_1_19 uf_nome" class="gt_row gt_left">São Paulo</td>
<td headers="Sudeste stub_1_19 jurisdicao" class="gt_row gt_right">68.994</td>
<td headers="Sudeste stub_1_19 otimo" class="gt_row gt_right">67.919</td>
<td headers="Sudeste stub_1_19 reducao" class="gt_row gt_right">1.075</td>
<td headers="Sudeste stub_1_19 reducao_pct" class="gt_row gt_right">1,6%</td>
</tr>
<tr>
<th id="stub_1_20" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Sudeste stub_1_20 uf_nome" class="gt_row gt_left">Espírito Santo</td>
<td headers="Sudeste stub_1_20 jurisdicao" class="gt_row gt_right">19.489</td>
<td headers="Sudeste stub_1_20 otimo" class="gt_row gt_right">18.822</td>
<td headers="Sudeste stub_1_20 reducao" class="gt_row gt_right">667</td>
<td headers="Sudeste stub_1_20 reducao_pct" class="gt_row gt_right">3,4%</td>
</tr>
<tr>
<th id="stub_1_21" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Sudeste stub_1_21 uf_nome" class="gt_row gt_left">Rio de Janeiro</td>
<td headers="Sudeste stub_1_21 jurisdicao" class="gt_row gt_right">11.783</td>
<td headers="Sudeste stub_1_21 otimo" class="gt_row gt_right">11.783</td>
<td headers="Sudeste stub_1_21 reducao" class="gt_row gt_right">0</td>
<td headers="Sudeste stub_1_21 reducao_pct" class="gt_row gt_right">0,0%</td>
</tr>
<tr>
<th id="summary_stub_Sudeste_1" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_first_summary_row thick gt_last_summary_row">Total da Região</th>
<td headers="Sudeste summary_stub_Sudeste_1 uf_nome" class="gt_row gt_left gt_summary_row gt_first_summary_row thick gt_last_summary_row">—</td>
<td headers="Sudeste summary_stub_Sudeste_1 jurisdicao" class="gt_row gt_right gt_summary_row gt_first_summary_row thick gt_last_summary_row">283.030</td>
<td headers="Sudeste summary_stub_Sudeste_1 otimo" class="gt_row gt_right gt_summary_row gt_first_summary_row thick gt_last_summary_row">277.037</td>
<td headers="Sudeste summary_stub_Sudeste_1 reducao" class="gt_row gt_right gt_summary_row gt_first_summary_row thick gt_last_summary_row">5.993</td>
<td headers="Sudeste summary_stub_Sudeste_1 reducao_pct" class="gt_row gt_right gt_summary_row gt_first_summary_row thick gt_last_summary_row">—</td>
</tr>
<tr class="gt_group_heading_row">
<th colspan="6" class="gt_group_heading" scope="colgroup" id="Sul">Sul</th>
    </tr>
<tr class="gt_row_group_first">
<th id="stub_1_22" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Sul stub_1_22 uf_nome" class="gt_row gt_left">Rio Grande do Sul</td>
<td headers="Sul stub_1_22 jurisdicao" class="gt_row gt_right">98.559</td>
<td headers="Sul stub_1_22 otimo" class="gt_row gt_right">92.542</td>
<td headers="Sul stub_1_22 reducao" class="gt_row gt_right">6.018</td>
<td headers="Sul stub_1_22 reducao_pct" class="gt_row gt_right">6,1%</td>
</tr>
<tr>
<th id="stub_1_23" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Sul stub_1_23 uf_nome" class="gt_row gt_left">Santa Catarina</td>
<td headers="Sul stub_1_23 jurisdicao" class="gt_row gt_right">42.431</td>
<td headers="Sul stub_1_23 otimo" class="gt_row gt_right">39.476</td>
<td headers="Sul stub_1_23 reducao" class="gt_row gt_right">2.955</td>
<td headers="Sul stub_1_23 reducao_pct" class="gt_row gt_right">7,0%</td>
</tr>
<tr>
<th id="stub_1_24" scope="row" class="gt_row gt_left gt_stub"></th>
<td headers="Sul stub_1_24 uf_nome" class="gt_row gt_left">Paraná</td>
<td headers="Sul stub_1_24 jurisdicao" class="gt_row gt_right">60.228</td>
<td headers="Sul stub_1_24 otimo" class="gt_row gt_right">59.806</td>
<td headers="Sul stub_1_24 reducao" class="gt_row gt_right">422</td>
<td headers="Sul stub_1_24 reducao_pct" class="gt_row gt_right">0,7%</td>
</tr>
<tr>
<th id="summary_stub_Sul_1" scope="row" class="gt_row gt_left gt_stub gt_summary_row gt_first_summary_row thick gt_last_summary_row">Total da Região</th>
<td headers="Sul summary_stub_Sul_1 uf_nome" class="gt_row gt_left gt_summary_row gt_first_summary_row thick gt_last_summary_row">—</td>
<td headers="Sul summary_stub_Sul_1 jurisdicao" class="gt_row gt_right gt_summary_row gt_first_summary_row thick gt_last_summary_row">201.218</td>
<td headers="Sul summary_stub_Sul_1 otimo" class="gt_row gt_right gt_summary_row gt_first_summary_row thick gt_last_summary_row">191.824</td>
<td headers="Sul summary_stub_Sul_1 reducao" class="gt_row gt_right gt_summary_row gt_first_summary_row thick gt_last_summary_row">9.394</td>
<td headers="Sul summary_stub_Sul_1 reducao_pct" class="gt_row gt_right gt_summary_row gt_first_summary_row thick gt_last_summary_row">—</td>
</tr>
<tr>
<th id="grand_summary_stub_1" scope="row" class="gt_row gt_left gt_stub gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">Total Brasil</th>
<td headers="grand_summary_stub_1 uf_nome" class="gt_row gt_left gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">—</td>
<td headers="grand_summary_stub_1 jurisdicao" class="gt_row gt_right gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">1.166.205</td>
<td headers="grand_summary_stub_1 otimo" class="gt_row gt_right gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">1.126.925</td>
<td headers="grand_summary_stub_1 reducao" class="gt_row gt_right gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">39.280</td>
<td headers="grand_summary_stub_1 reducao_pct" class="gt_row gt_right gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">—</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ggplot(data = res_ufs_df%&gt;%mutate(uf_nome=forcats::fct_reorder(uf_nome, reducao)), aes(x=reducao, y=uf_nome)) +</span></span>
<span><span class="co">#   geom_point() +</span></span>
<span><span class="co">#   scale_x_continuous(labels=scales::label_currency(prefix = "R$ ", decimal.mark = ",", big.mark = ".")) +</span></span>
<span><span class="co">#   labs(subtitle="Redução total nos custos de descolamento do plano ótimo\nem comparação com a manutenção das agência de jurisdição", x="", y="")</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="caso-2--considerando-os-custos-com-entrevistadores-a-coleta-da-pof-2024-25-na-superintendência-estadua-da-bahia-sesba">Caso 2. Considerando os custos com entrevistadores: a coleta da POF
2024-25 na Superintendência Estadua da Bahia (SES/BA)<a class="anchor" aria-label="anchor" href="#caso-2--considerando-os-custos-com-entrevistadores-a-coleta-da-pof-2024-25-na-superintend%C3%AAncia-estadua-da-bahia-sesba"></a>
</h3>
<p>Vamos agora considerar a coleta da Pesquisa de Orçamentos Familiares
(POF) na Bahia, planejada para ocorrer entre 2024 e 2025.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span></span>
<span><span class="va">uf_codigo_now</span> <span class="op">&lt;-</span> <span class="fl">29</span></span>
<span><span class="va">ufnow</span> <span class="op">&lt;-</span> <span class="va">ufs</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">uf_codigo</span><span class="op">==</span><span class="va">uf_codigo_now</span><span class="op">)</span></span>
<span><span class="co">## amostra_pof</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu">pof2024ba</span><span class="fu">:::</span><span class="va">package</span><span class="op">$</span><span class="va">cache_dir</span>, <span class="st">"amostra_preliminar.rda"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">amostra_uf</span> <span class="op">&lt;-</span> <span class="va">amostra_preliminar</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">upa</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">==</span><span class="va">ufnow</span><span class="op">$</span><span class="va">uf_codigo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"^2927408"</span> ,<span class="va">agencia_codigo</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">upa</span>, .keep_all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>uc<span class="op">=</span><span class="va">upa</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    dias_coleta <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">dias_coleta_pof</span>,</span>
<span>    viagens <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">viagens_pof</span><span class="op">)</span><span class="co">#%&gt;%ungroup()%&gt;%slice_sample(n=100)</span></span>
<span></span>
<span><span class="co">## distancias upas</span></span>
<span><span class="va">distancias_upas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="st">"/Users/eleon/gitlab/orce/data-raw/distancias_agencias_setores_osrm.rds"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>uc<span class="op">=</span><span class="va">setor</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>municipio_codigo<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">uc</span>,<span class="fl">1</span>,<span class="fl">7</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">agencias_municipios_diaria</span>, by<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"agencia_codigo"</span>, <span class="st">"municipio_codigo"</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">semi_join</a></span><span class="op">(</span><span class="va">amostra_uf</span>, by<span class="op">=</span><span class="st">"uc"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>diaria_pernoite<span class="op">=</span><span class="va">duracao_horas</span><span class="op">&gt;</span><span class="va">params</span><span class="op">$</span><span class="va">horas_viagem_pernoite</span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="parâmetros-iniciais">Parâmetros iniciais<a class="anchor" aria-label="anchor" href="#par%C3%A2metros-iniciais"></a>
</h4>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## sem custo fixo nem custo de treinamento</span></span>
<span><span class="va">params_pof_0</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ucs<span class="op">=</span><span class="va">amostra_uf</span>,</span>
<span>           custo_litro_combustivel <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">custo_litro_combustivel</span>,</span>
<span>           custo_hora_viagem <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">custo_hora_viagem</span>,</span>
<span>           kml <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">kml</span>,</span>
<span>           valor_diaria <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">valor_diaria</span>,</span>
<span>           dias_treinamento <span class="op">=</span> <span class="fl">0</span>,</span>
<span>           agencias_treinadas <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>           agencias_treinamento  <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>           distancias_ucs<span class="op">=</span><span class="va">distancias_upas</span>,</span>
<span>           adicional_troca_jurisdicao  <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">adicional_troca_jurisdicao</span>,</span>
<span>           remuneracao_entrevistador<span class="op">=</span><span class="fl">0</span>,</span>
<span>           n_entrevistadores_min<span class="op">=</span><span class="fl">2</span>, </span>
<span>           dias_coleta_entrevistador_max<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">dias_coleta_entrevistador_max_pof</span>,</span>
<span>           solver<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">solver</span>,</span>
<span>           max_time<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">max_time</span>,</span>
<span>           rel_tol<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">rel_tol</span></span>
<span>           <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">params_pof_0</span>, <span class="va">head</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; $ucs</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 11</span></span></span>
<span><span class="co">#&gt;   uc              setor    estrato_pof trimestre municipio_codigo municipio_nome</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 290570105000184 2905701…        <span style="text-decoration: underline;">2</span>908         1 2905701          CAMACARI      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 290650105000025 2906501…        <span style="text-decoration: underline;">2</span>908         1 2906501          CANDEIAS      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 290650105000106 2906501…        <span style="text-decoration: underline;">2</span>908         1 2906501          CANDEIAS      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 292100505000006 2921005…        <span style="text-decoration: underline;">2</span>908         1 2921005          MATA DE SAO J…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 293320815000003 2933208…        <span style="text-decoration: underline;">2</span>909         1 2933208          VERA CRUZ     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 290080125000015 2900801…        <span style="text-decoration: underline;">2</span>910         1 2900801          ALCOBACA      </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: agencia_codigo &lt;chr&gt;, agencia_nome &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   situacao_tipo &lt;chr&gt;, dias_coleta &lt;int&gt;, viagens &lt;int&gt;</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $custo_litro_combustivel</span></span>
<span><span class="co">#&gt; [1] 6</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $custo_hora_viagem</span></span>
<span><span class="co">#&gt; [1] 10</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $kml</span></span>
<span><span class="co">#&gt; [1] 10</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $valor_diaria</span></span>
<span><span class="co">#&gt; [1] 335</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dias_treinamento</span></span>
<span><span class="co">#&gt; [1] 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $agencias_treinadas</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $agencias_treinamento</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $distancias_ucs</span></span>
<span><span class="co">#&gt;                uc agencia_codigo distancia_km duracao_horas agencia_lat</span></span>
<span><span class="co">#&gt; 1 290035505000027      290070200       263,82          4,01   -12,14108</span></span>
<span><span class="co">#&gt; 2 290035505000027      290320100      1007,91         13,63   -12,14613</span></span>
<span><span class="co">#&gt; 3 290035505000027      290390400       936,28         13,10   -13,25474</span></span>
<span><span class="co">#&gt; 4 290035505000027      290460500       682,01          9,84   -14,20330</span></span>
<span><span class="co">#&gt; 5 290035505000027      290490200       307,16          4,50   -12,60476</span></span>
<span><span class="co">#&gt; 6 290035505000027      290570100       348,16          4,82   -12,70437</span></span>
<span><span class="co">#&gt;   agencia_lon   ponto_origem setor_lat setor_lon municipio_codigo</span></span>
<span><span class="co">#&gt; 1   -38,42650 pontos_setores -10,67762 -38,01224          2900355</span></span>
<span><span class="co">#&gt; 2   -44,99788 pontos_setores -10,67762 -38,01224          2900355</span></span>
<span><span class="co">#&gt; 3   -43,40660 pontos_setores -10,67762 -38,01224          2900355</span></span>
<span><span class="co">#&gt; 4   -41,67101 pontos_setores -10,67762 -38,01224          2900355</span></span>
<span><span class="co">#&gt; 5   -38,96288 pontos_setores -10,67762 -38,01224          2900355</span></span>
<span><span class="co">#&gt; 6   -38,32298 pontos_setores -10,67762 -38,01224          2900355</span></span>
<span><span class="co">#&gt;   diaria_municipio diaria_pernoite</span></span>
<span><span class="co">#&gt; 1             TRUE            TRUE</span></span>
<span><span class="co">#&gt; 2             TRUE            TRUE</span></span>
<span><span class="co">#&gt; 3             TRUE            TRUE</span></span>
<span><span class="co">#&gt; 4             TRUE            TRUE</span></span>
<span><span class="co">#&gt; 5             TRUE            TRUE</span></span>
<span><span class="co">#&gt; 6             TRUE            TRUE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $adicional_troca_jurisdicao</span></span>
<span><span class="co">#&gt; [1] 100</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $remuneracao_entrevistador</span></span>
<span><span class="co">#&gt; [1] 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $n_entrevistadores_min</span></span>
<span><span class="co">#&gt; [1] 2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dias_coleta_entrevistador_max</span></span>
<span><span class="co">#&gt; [1] 200</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $solver</span></span>
<span><span class="co">#&gt; [1] "cbc"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $max_time</span></span>
<span><span class="co">#&gt; [1] 9000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $rel_tol</span></span>
<span><span class="co">#&gt; [1] 0,02</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"parâmetros sem valor fixado: "</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">setdiff</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">params_alocar_ucs</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">params_pof_0</span><span class="op">)</span><span class="op">)</span>, collapse<span class="op">=</span><span class="st">", "</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "parâmetros sem valor fixado:  agencias, diarias_entrevistador_max, distancias_agencias, resultado_completo"</span></span></code></pre></div>
<p>Por conta de restrições no cronograma de coleta, que deve ser
realizada em períodos específicos, a POF tem um mínimo de dois
entrevistadores por agência. Em um ano de coleta, cada entrevistador
poderá trabalhar 200 dias. Quando a coleta é feita com diária
(pernoite), são necessárias 2 viagens. O total de dias de coleta por
Unidade Primária de Amostragem (composta por um ou mais setores
censitários) é 10. O deslocamento envolve, portanto, 10 idas e voltas
para setores sem pernoite, ou 2 idas e voltas para os casos sem
pernoite.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dagencias</span> <span class="op">&lt;-</span> <span class="va">distancias_agencias_osrm</span></span>
<span><span class="va">params_pof_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/modifyList.html" class="external-link">modifyList</a></span><span class="op">(</span><span class="va">params_pof_0</span>, </span>
<span>                           <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                             distancias_agencias<span class="op">=</span><span class="va">distancias_agencias_osrm</span>,</span>
<span>                             dias_treinamento <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">dias_treinamento_pof</span>,<span class="co"># por funcionário</span></span>
<span>                             agencias_treinamento  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'292740800'</span>, <span class="st">'291080000'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"parâmetros sem valor fixado: "</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">setdiff</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">params_alocar_ucs</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">params_pof_1</span><span class="op">)</span><span class="op">)</span>, collapse<span class="op">=</span><span class="st">", "</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "parâmetros sem valor fixado:  agencias, diarias_entrevistador_max, resultado_completo"</span></span>
<span></span>
<span></span>
<span><span class="va">estrategias_pof</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>params_pof<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">params_pof_0</span><span class="op">)</span>, </span>
<span>         descricao<span class="op">=</span><span class="st">'Somente deslocamento'</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>params_pof<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">params_pof_1</span><span class="op">)</span>, descricao<span class="op">=</span><span class="st">"Custo de treinamento"</span><span class="op">)</span>,</span>
<span>  <span class="co"># tibble(params_pof=list(modifyList(params_pof_1, </span></span>
<span>  <span class="co">#                               list(</span></span>
<span>  <span class="co">#                                 ## diárias só com mais de duas horas de viagem</span></span>
<span>  <span class="co">#                                 distancias_ucs=distancias_upas%&gt;%</span></span>
<span>  <span class="co">#                                   mutate(diaria_pernoite=duracao_horas&gt;2)))), </span></span>
<span>  <span class="co">#        descricao="Custo de treinamento + redução diárias por pernoite"),</span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>params_pof<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/modifyList.html" class="external-link">modifyList</a></span><span class="op">(</span><span class="va">params_pof_1</span>, </span>
<span>                                <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>remuneracao_entrevistador<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">remuneracao_entrevistador</span><span class="op">*</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, descricao<span class="op">=</span><span class="st">'Custo de treinamento + remuneração dos apms'</span><span class="op">)</span>,</span>
<span>  <span class="co"># , tibble(params_pof=list(modifyList(params_pof_1, </span></span>
<span>  <span class="co">#                               list(</span></span>
<span>  <span class="co">#                                 adicional_troca_jurisdicao=300))), </span></span>
<span>  <span class="co">#        descricao='custo de treinamento  + Adicional troca de jurisdição R$300')</span></span>
<span>  <span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>resultado<span class="op">=</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">params_pof</span>, <span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">alocar_ucs</span>, <span class="va">.x</span><span class="op">)</span>, .progress <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">estrategias_pof_sum</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">estrategias_pof</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rowwise.html" class="external-link">rowwise</a></span><span class="op">(</span><span class="va">descricao</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/reframe.html" class="external-link">reframe</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span></span>
<span>      <span class="va">resultado</span><span class="op">$</span><span class="va">resultado_agencias_otimo</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>modelo<span class="op">=</span><span class="st">"Ótimo"</span><span class="op">)</span>,</span>
<span>      <span class="va">resultado</span><span class="op">$</span><span class="va">resultado_agencias_jurisdicao</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>modelo<span class="op">=</span><span class="st">"Jurisdição"</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">modelo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>n_agencias<span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></span><span class="op">(</span><span class="st">"custo|n_agencias"</span><span class="op">)</span>, <span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">.x</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        <span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>custo_total<span class="op">=</span><span class="va">custo_deslocamento</span><span class="op">+</span><span class="va">custo_fixo</span><span class="op">+</span><span class="va">custo_total_entrevistadores</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">descricao</span>, <span class="va">modelo</span>, <span class="va">n_agencias</span>, <span class="va">custo_total</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Nesse caso básico, sem incluindo somente os custos de deslocamento, o
resultado é o seguinte.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">report_plans</span><span class="op">(</span><span class="va">estrategias_pof</span><span class="op">$</span><span class="va">resultado</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/cols_hide.html" class="external-link">cols_hide</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"agencia_nome"</span>, <span class="st">"n_uc"</span>, <span class="st">"total_diarias"</span>, <span class="st">"combustivel"</span>, <span class="st">"custo_total"</span>, <span class="st">"custo_troca"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(agencia_codigo)`</span></span></code></pre></div>
<div id="adgwxbhisi" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#adgwxbhisi table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#adgwxbhisi thead, #adgwxbhisi tbody, #adgwxbhisi tfoot, #adgwxbhisi tr, #adgwxbhisi td, #adgwxbhisi th {
  border-style: none;
}

#adgwxbhisi p {
  margin: 0;
  padding: 0;
}

#adgwxbhisi .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#adgwxbhisi .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#adgwxbhisi .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#adgwxbhisi .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#adgwxbhisi .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#adgwxbhisi .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#adgwxbhisi .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#adgwxbhisi .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#adgwxbhisi .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#adgwxbhisi .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#adgwxbhisi .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#adgwxbhisi .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#adgwxbhisi .gt_spanner_row {
  border-bottom-style: hidden;
}

#adgwxbhisi .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#adgwxbhisi .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#adgwxbhisi .gt_from_md > :first-child {
  margin-top: 0;
}

#adgwxbhisi .gt_from_md > :last-child {
  margin-bottom: 0;
}

#adgwxbhisi .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#adgwxbhisi .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#adgwxbhisi .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#adgwxbhisi .gt_row_group_first td {
  border-top-width: 2px;
}

#adgwxbhisi .gt_row_group_first th {
  border-top-width: 2px;
}

#adgwxbhisi .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#adgwxbhisi .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#adgwxbhisi .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#adgwxbhisi .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#adgwxbhisi .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#adgwxbhisi .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#adgwxbhisi .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#adgwxbhisi .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#adgwxbhisi .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#adgwxbhisi .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#adgwxbhisi .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#adgwxbhisi .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#adgwxbhisi .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#adgwxbhisi .gt_left {
  text-align: left;
}

#adgwxbhisi .gt_center {
  text-align: center;
}

#adgwxbhisi .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#adgwxbhisi .gt_font_normal {
  font-weight: normal;
}

#adgwxbhisi .gt_font_bold {
  font-weight: bold;
}

#adgwxbhisi .gt_font_italic {
  font-style: italic;
}

#adgwxbhisi .gt_super {
  font-size: 65%;
}

#adgwxbhisi .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#adgwxbhisi .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#adgwxbhisi .gt_indent_1 {
  text-indent: 5px;
}

#adgwxbhisi .gt_indent_2 {
  text-indent: 10px;
}

#adgwxbhisi .gt_indent_3 {
  text-indent: 15px;
}

#adgwxbhisi .gt_indent_4 {
  text-indent: 20px;
}

#adgwxbhisi .gt_indent_5 {
  text-indent: 25px;
}

#adgwxbhisi .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#adgwxbhisi div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id=""></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Custo Total Otimo">Custo Total Otimo</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Custo Total Jurisdicao">Custo Total Jurisdicao</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Total Diarias Otimo">Total Diarias Otimo</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Total Diarias Jurisdicao">Total Diarias Jurisdicao</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Custo Combustivel Otimo">Custo Combustivel Otimo</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Custo Combustivel Jurisdicao">Custo Combustivel Jurisdicao</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="N Ucs Otimo">N Ucs Otimo</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="N Ucs Jurisdicao">N Ucs Jurisdicao</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<th id="stub_1_1" scope="row" class="gt_row gt_left gt_stub">Barreiras</th>
<td headers="stub_1_1 custo_total_otimo" class="gt_row gt_right">R$4.791</td>
<td headers="stub_1_1 custo_total_jurisdicao" class="gt_row gt_right">R$10.110</td>
<td headers="stub_1_1 total_diarias_otimo" class="gt_row gt_right">0</td>
<td headers="stub_1_1 total_diarias_jurisdicao" class="gt_row gt_right">19</td>
<td headers="stub_1_1 custo_combustivel_otimo" class="gt_row gt_right">R$3.825</td>
<td headers="stub_1_1 custo_combustivel_jurisdicao" class="gt_row gt_right">R$2.940</td>
<td headers="stub_1_1 n_ucs_otimo" class="gt_row gt_right">6</td>
<td headers="stub_1_1 n_ucs_jurisdicao" class="gt_row gt_right">6</td>
</tr>
<tr>
<th id="stub_1_2" scope="row" class="gt_row gt_left gt_stub">Brumado</th>
<td headers="stub_1_2 custo_total_otimo" class="gt_row gt_right">R$8.058</td>
<td headers="stub_1_2 custo_total_jurisdicao" class="gt_row gt_right">R$3.449</td>
<td headers="stub_1_2 total_diarias_otimo" class="gt_row gt_right">19</td>
<td headers="stub_1_2 total_diarias_jurisdicao" class="gt_row gt_right">10</td>
<td headers="stub_1_2 custo_combustivel_otimo" class="gt_row gt_right">R$1.289</td>
<td headers="stub_1_2 custo_combustivel_jurisdicao" class="gt_row gt_right">R$206</td>
<td headers="stub_1_2 n_ucs_otimo" class="gt_row gt_right">3</td>
<td headers="stub_1_2 n_ucs_jurisdicao" class="gt_row gt_right">1</td>
</tr>
<tr>
<th id="stub_1_3" scope="row" class="gt_row gt_left gt_stub">Cruz das Almas</th>
<td headers="stub_1_3 custo_total_otimo" class="gt_row gt_right">R$878</td>
<td headers="stub_1_3 custo_total_jurisdicao" class="gt_row gt_right">R$1.488</td>
<td headers="stub_1_3 total_diarias_otimo" class="gt_row gt_right">0</td>
<td headers="stub_1_3 total_diarias_jurisdicao" class="gt_row gt_right">0</td>
<td headers="stub_1_3 custo_combustivel_otimo" class="gt_row gt_right">R$612</td>
<td headers="stub_1_3 custo_combustivel_jurisdicao" class="gt_row gt_right">R$1.080</td>
<td headers="stub_1_3 n_ucs_otimo" class="gt_row gt_right">4</td>
<td headers="stub_1_3 n_ucs_jurisdicao" class="gt_row gt_right">5</td>
</tr>
<tr>
<th id="stub_1_4" scope="row" class="gt_row gt_left gt_stub">Eunápolis</th>
<td headers="stub_1_4 custo_total_otimo" class="gt_row gt_right">R$1.046</td>
<td headers="stub_1_4 custo_total_jurisdicao" class="gt_row gt_right">R$548</td>
<td headers="stub_1_4 total_diarias_otimo" class="gt_row gt_right">0</td>
<td headers="stub_1_4 total_diarias_jurisdicao" class="gt_row gt_right">0</td>
<td headers="stub_1_4 custo_combustivel_otimo" class="gt_row gt_right">R$748</td>
<td headers="stub_1_4 custo_combustivel_jurisdicao" class="gt_row gt_right">R$418</td>
<td headers="stub_1_4 n_ucs_otimo" class="gt_row gt_right">4</td>
<td headers="stub_1_4 n_ucs_jurisdicao" class="gt_row gt_right">3</td>
</tr>
<tr>
<th id="stub_1_5" scope="row" class="gt_row gt_left gt_stub">Feira de Santana</th>
<td headers="stub_1_5 custo_total_otimo" class="gt_row gt_right">R$3.914</td>
<td headers="stub_1_5 custo_total_jurisdicao" class="gt_row gt_right">R$3.503</td>
<td headers="stub_1_5 total_diarias_otimo" class="gt_row gt_right">0</td>
<td headers="stub_1_5 total_diarias_jurisdicao" class="gt_row gt_right">0</td>
<td headers="stub_1_5 custo_combustivel_otimo" class="gt_row gt_right">R$3.002</td>
<td headers="stub_1_5 custo_combustivel_jurisdicao" class="gt_row gt_right">R$2.673</td>
<td headers="stub_1_5 n_ucs_otimo" class="gt_row gt_right">21</td>
<td headers="stub_1_5 n_ucs_jurisdicao" class="gt_row gt_right">20</td>
</tr>
<tr>
<th id="stub_1_6" scope="row" class="gt_row gt_left gt_stub">Ibotirama</th>
<td headers="stub_1_6 custo_total_otimo" class="gt_row gt_right">R$11.260</td>
<td headers="stub_1_6 custo_total_jurisdicao" class="gt_row gt_right">R$11.628</td>
<td headers="stub_1_6 total_diarias_otimo" class="gt_row gt_right">28</td>
<td headers="stub_1_6 total_diarias_jurisdicao" class="gt_row gt_right">28</td>
<td headers="stub_1_6 custo_combustivel_otimo" class="gt_row gt_right">R$1.319</td>
<td headers="stub_1_6 custo_combustivel_jurisdicao" class="gt_row gt_right">R$1.615</td>
<td headers="stub_1_6 n_ucs_otimo" class="gt_row gt_right">6</td>
<td headers="stub_1_6 n_ucs_jurisdicao" class="gt_row gt_right">6</td>
</tr>
<tr>
<th id="stub_1_7" scope="row" class="gt_row gt_left gt_stub">Ilhéus</th>
<td headers="stub_1_7 custo_total_otimo" class="gt_row gt_right">R$4.868</td>
<td headers="stub_1_7 custo_total_jurisdicao" class="gt_row gt_right">R$8.981</td>
<td headers="stub_1_7 total_diarias_otimo" class="gt_row gt_right">10</td>
<td headers="stub_1_7 total_diarias_jurisdicao" class="gt_row gt_right">10</td>
<td headers="stub_1_7 custo_combustivel_otimo" class="gt_row gt_right">R$1.310</td>
<td headers="stub_1_7 custo_combustivel_jurisdicao" class="gt_row gt_right">R$4.526</td>
<td headers="stub_1_7 n_ucs_otimo" class="gt_row gt_right">5</td>
<td headers="stub_1_7 n_ucs_jurisdicao" class="gt_row gt_right">9</td>
</tr>
<tr>
<th id="stub_1_8" scope="row" class="gt_row gt_left gt_stub">Ipiaú</th>
<td headers="stub_1_8 custo_total_otimo" class="gt_row gt_right">R$13.335</td>
<td headers="stub_1_8 custo_total_jurisdicao" class="gt_row gt_right">R$7.530</td>
<td headers="stub_1_8 total_diarias_otimo" class="gt_row gt_right">15</td>
<td headers="stub_1_8 total_diarias_jurisdicao" class="gt_row gt_right">10</td>
<td headers="stub_1_8 custo_combustivel_otimo" class="gt_row gt_right">R$6.466</td>
<td headers="stub_1_8 custo_combustivel_jurisdicao" class="gt_row gt_right">R$3.329</td>
<td headers="stub_1_8 n_ucs_otimo" class="gt_row gt_right">11</td>
<td headers="stub_1_8 n_ucs_jurisdicao" class="gt_row gt_right">8</td>
</tr>
<tr>
<th id="stub_1_9" scope="row" class="gt_row gt_left gt_stub">Itabuna</th>
<td headers="stub_1_9 custo_total_otimo" class="gt_row gt_right">R$9.707</td>
<td headers="stub_1_9 custo_total_jurisdicao" class="gt_row gt_right">R$8.259</td>
<td headers="stub_1_9 total_diarias_otimo" class="gt_row gt_right">19</td>
<td headers="stub_1_9 total_diarias_jurisdicao" class="gt_row gt_right">19</td>
<td headers="stub_1_9 custo_combustivel_otimo" class="gt_row gt_right">R$2.596</td>
<td headers="stub_1_9 custo_combustivel_jurisdicao" class="gt_row gt_right">R$1.471</td>
<td headers="stub_1_9 n_ucs_otimo" class="gt_row gt_right">9</td>
<td headers="stub_1_9 n_ucs_jurisdicao" class="gt_row gt_right">6</td>
</tr>
<tr>
<th id="stub_1_10" scope="row" class="gt_row gt_left gt_stub">Itamaraju</th>
<td headers="stub_1_10 custo_total_otimo" class="gt_row gt_right">R$4.461</td>
<td headers="stub_1_10 custo_total_jurisdicao" class="gt_row gt_right">R$5.900</td>
<td headers="stub_1_10 total_diarias_otimo" class="gt_row gt_right">10</td>
<td headers="stub_1_10 total_diarias_jurisdicao" class="gt_row gt_right">10</td>
<td headers="stub_1_10 custo_combustivel_otimo" class="gt_row gt_right">R$963</td>
<td headers="stub_1_10 custo_combustivel_jurisdicao" class="gt_row gt_right">R$2.138</td>
<td headers="stub_1_10 n_ucs_otimo" class="gt_row gt_right">7</td>
<td headers="stub_1_10 n_ucs_jurisdicao" class="gt_row gt_right">8</td>
</tr>
<tr>
<th id="stub_1_11" scope="row" class="gt_row gt_left gt_stub">Itapetinga</th>
<td headers="stub_1_11 custo_total_otimo" class="gt_row gt_right">R$6.643</td>
<td headers="stub_1_11 custo_total_jurisdicao" class="gt_row gt_right">R$5.012</td>
<td headers="stub_1_11 total_diarias_otimo" class="gt_row gt_right">0</td>
<td headers="stub_1_11 total_diarias_jurisdicao" class="gt_row gt_right">0</td>
<td headers="stub_1_11 custo_combustivel_otimo" class="gt_row gt_right">R$5.215</td>
<td headers="stub_1_11 custo_combustivel_jurisdicao" class="gt_row gt_right">R$3.930</td>
<td headers="stub_1_11 n_ucs_otimo" class="gt_row gt_right">8</td>
<td headers="stub_1_11 n_ucs_jurisdicao" class="gt_row gt_right">6</td>
</tr>
<tr>
<th id="stub_1_12" scope="row" class="gt_row gt_left gt_stub">Jaguaquara</th>
<td headers="stub_1_12 custo_total_otimo" class="gt_row gt_right">R$4.792</td>
<td headers="stub_1_12 custo_total_jurisdicao" class="gt_row gt_right">R$2.433</td>
<td headers="stub_1_12 total_diarias_otimo" class="gt_row gt_right">5</td>
<td headers="stub_1_12 total_diarias_jurisdicao" class="gt_row gt_right">0</td>
<td headers="stub_1_12 custo_combustivel_otimo" class="gt_row gt_right">R$2.305</td>
<td headers="stub_1_12 custo_combustivel_jurisdicao" class="gt_row gt_right">R$1.843</td>
<td headers="stub_1_12 n_ucs_otimo" class="gt_row gt_right">8</td>
<td headers="stub_1_12 n_ucs_jurisdicao" class="gt_row gt_right">7</td>
</tr>
<tr>
<th id="stub_1_13" scope="row" class="gt_row gt_left gt_stub">Porto Seguro</th>
<td headers="stub_1_13 custo_total_otimo" class="gt_row gt_right">R$3.757</td>
<td headers="stub_1_13 custo_total_jurisdicao" class="gt_row gt_right">R$4.693</td>
<td headers="stub_1_13 total_diarias_otimo" class="gt_row gt_right">10</td>
<td headers="stub_1_13 total_diarias_jurisdicao" class="gt_row gt_right">10</td>
<td headers="stub_1_13 custo_combustivel_otimo" class="gt_row gt_right">R$411</td>
<td headers="stub_1_13 custo_combustivel_jurisdicao" class="gt_row gt_right">R$1.085</td>
<td headers="stub_1_13 n_ucs_otimo" class="gt_row gt_right">3</td>
<td headers="stub_1_13 n_ucs_jurisdicao" class="gt_row gt_right">4</td>
</tr>
<tr>
<th id="stub_1_14" scope="row" class="gt_row gt_left gt_stub">Santa Rita de Cássia</th>
<td headers="stub_1_14 custo_total_otimo" class="gt_row gt_right">R$7.158</td>
<td headers="stub_1_14 custo_total_jurisdicao" class="gt_row gt_right">R$14.158</td>
<td headers="stub_1_14 total_diarias_otimo" class="gt_row gt_right">19</td>
<td headers="stub_1_14 total_diarias_jurisdicao" class="gt_row gt_right">38</td>
<td headers="stub_1_14 custo_combustivel_otimo" class="gt_row gt_right">R$617</td>
<td headers="stub_1_14 custo_combustivel_jurisdicao" class="gt_row gt_right">R$1.120</td>
<td headers="stub_1_14 n_ucs_otimo" class="gt_row gt_right">2</td>
<td headers="stub_1_14 n_ucs_jurisdicao" class="gt_row gt_right">4</td>
</tr>
<tr>
<th id="stub_1_15" scope="row" class="gt_row gt_left gt_stub">Santo Amaro</th>
<td headers="stub_1_15 custo_total_otimo" class="gt_row gt_right">R$3.898</td>
<td headers="stub_1_15 custo_total_jurisdicao" class="gt_row gt_right">R$4.445</td>
<td headers="stub_1_15 total_diarias_otimo" class="gt_row gt_right">0</td>
<td headers="stub_1_15 total_diarias_jurisdicao" class="gt_row gt_right">0</td>
<td headers="stub_1_15 custo_combustivel_otimo" class="gt_row gt_right">R$3.012</td>
<td headers="stub_1_15 custo_combustivel_jurisdicao" class="gt_row gt_right">R$3.453</td>
<td headers="stub_1_15 n_ucs_otimo" class="gt_row gt_right">9</td>
<td headers="stub_1_15 n_ucs_jurisdicao" class="gt_row gt_right">10</td>
</tr>
<tr>
<th id="stub_1_16" scope="row" class="gt_row gt_left gt_stub">Santo Antônio de Jesus</th>
<td headers="stub_1_16 custo_total_otimo" class="gt_row gt_right">R$4.483</td>
<td headers="stub_1_16 custo_total_jurisdicao" class="gt_row gt_right">R$4.322</td>
<td headers="stub_1_16 total_diarias_otimo" class="gt_row gt_right">0</td>
<td headers="stub_1_16 total_diarias_jurisdicao" class="gt_row gt_right">0</td>
<td headers="stub_1_16 custo_combustivel_otimo" class="gt_row gt_right">R$3.445</td>
<td headers="stub_1_16 custo_combustivel_jurisdicao" class="gt_row gt_right">R$3.322</td>
<td headers="stub_1_16 n_ucs_otimo" class="gt_row gt_right">9</td>
<td headers="stub_1_16 n_ucs_jurisdicao" class="gt_row gt_right">8</td>
</tr>
<tr>
<th id="stub_1_17" scope="row" class="gt_row gt_left gt_stub">Seabra</th>
<td headers="stub_1_17 custo_total_otimo" class="gt_row gt_right">R$7.733</td>
<td headers="stub_1_17 custo_total_jurisdicao" class="gt_row gt_right">R$4.162</td>
<td headers="stub_1_17 total_diarias_otimo" class="gt_row gt_right">19</td>
<td headers="stub_1_17 total_diarias_jurisdicao" class="gt_row gt_right">10</td>
<td headers="stub_1_17 custo_combustivel_otimo" class="gt_row gt_right">R$1.038</td>
<td headers="stub_1_17 custo_combustivel_jurisdicao" class="gt_row gt_right">R$743</td>
<td headers="stub_1_17 n_ucs_otimo" class="gt_row gt_right">3</td>
<td headers="stub_1_17 n_ucs_jurisdicao" class="gt_row gt_right">2</td>
</tr>
<tr>
<th id="stub_1_18" scope="row" class="gt_row gt_left gt_stub">Teixeira de Freitas</th>
<td headers="stub_1_18 custo_total_otimo" class="gt_row gt_right">R$4.871</td>
<td headers="stub_1_18 custo_total_jurisdicao" class="gt_row gt_right">R$4.352</td>
<td headers="stub_1_18 total_diarias_otimo" class="gt_row gt_right">0</td>
<td headers="stub_1_18 total_diarias_jurisdicao" class="gt_row gt_right">0</td>
<td headers="stub_1_18 custo_combustivel_otimo" class="gt_row gt_right">R$3.769</td>
<td headers="stub_1_18 custo_combustivel_jurisdicao" class="gt_row gt_right">R$3.360</td>
<td headers="stub_1_18 n_ucs_otimo" class="gt_row gt_right">8</td>
<td headers="stub_1_18 n_ucs_jurisdicao" class="gt_row gt_right">7</td>
</tr>
<tr>
<th id="stub_1_19" scope="row" class="gt_row gt_left gt_stub">Valença</th>
<td headers="stub_1_19 custo_total_otimo" class="gt_row gt_right">R$6.353</td>
<td headers="stub_1_19 custo_total_jurisdicao" class="gt_row gt_right">R$16.738</td>
<td headers="stub_1_19 total_diarias_otimo" class="gt_row gt_right">0</td>
<td headers="stub_1_19 total_diarias_jurisdicao" class="gt_row gt_right">28</td>
<td headers="stub_1_19 custo_combustivel_otimo" class="gt_row gt_right">R$4.971</td>
<td headers="stub_1_19 custo_combustivel_jurisdicao" class="gt_row gt_right">R$5.602</td>
<td headers="stub_1_19 n_ucs_otimo" class="gt_row gt_right">9</td>
<td headers="stub_1_19 n_ucs_jurisdicao" class="gt_row gt_right">12</td>
</tr>
<tr>
<th id="stub_1_20" scope="row" class="gt_row gt_left gt_stub">Vitória da Conquista</th>
<td headers="stub_1_20 custo_total_otimo" class="gt_row gt_right">R$14.260</td>
<td headers="stub_1_20 custo_total_jurisdicao" class="gt_row gt_right">R$25.835</td>
<td headers="stub_1_20 total_diarias_otimo" class="gt_row gt_right">28</td>
<td headers="stub_1_20 total_diarias_jurisdicao" class="gt_row gt_right">57</td>
<td headers="stub_1_20 custo_combustivel_otimo" class="gt_row gt_right">R$3.639</td>
<td headers="stub_1_20 custo_combustivel_jurisdicao" class="gt_row gt_right">R$5.250</td>
<td headers="stub_1_20 n_ucs_otimo" class="gt_row gt_right">14</td>
<td headers="stub_1_20 n_ucs_jurisdicao" class="gt_row gt_right">18</td>
</tr>
<tr>
<th id="stub_1_21" scope="row" class="gt_row gt_left gt_stub">Xique Xique</th>
<td headers="stub_1_21 custo_total_otimo" class="gt_row gt_right">R$5.793</td>
<td headers="stub_1_21 custo_total_jurisdicao" class="gt_row gt_right">R$2.183</td>
<td headers="stub_1_21 total_diarias_otimo" class="gt_row gt_right">10</td>
<td headers="stub_1_21 total_diarias_jurisdicao" class="gt_row gt_right">0</td>
<td headers="stub_1_21 custo_combustivel_otimo" class="gt_row gt_right">R$2.024</td>
<td headers="stub_1_21 custo_combustivel_jurisdicao" class="gt_row gt_right">R$1.699</td>
<td headers="stub_1_21 n_ucs_otimo" class="gt_row gt_right">4</td>
<td headers="stub_1_21 n_ucs_jurisdicao" class="gt_row gt_right">3</td>
</tr>
<tr>
<th id="stub_1_22" scope="row" class="gt_row gt_left gt_stub">Agências sem alteração*</th>
<td headers="stub_1_22 custo_total_otimo" class="gt_row gt_right">R$85.079</td>
<td headers="stub_1_22 custo_total_jurisdicao" class="gt_row gt_right">R$85.079</td>
<td headers="stub_1_22 total_diarias_otimo" class="gt_row gt_right">76</td>
<td headers="stub_1_22 total_diarias_jurisdicao" class="gt_row gt_right">76</td>
<td headers="stub_1_22 custo_combustivel_otimo" class="gt_row gt_right">R$46.124</td>
<td headers="stub_1_22 custo_combustivel_jurisdicao" class="gt_row gt_right">R$46.124</td>
<td headers="stub_1_22 n_ucs_otimo" class="gt_row gt_right">124</td>
<td headers="stub_1_22 n_ucs_jurisdicao" class="gt_row gt_right">124</td>
</tr>
<tr>
<th id="grand_summary_stub_1" scope="row" class="gt_row gt_left gt_stub gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">Total Superintendência</th>
<td headers="grand_summary_stub_1 custo_total_otimo" class="gt_row gt_right gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">R$217.140</td>
<td headers="grand_summary_stub_1 custo_total_jurisdicao" class="gt_row gt_right gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">R$234.808</td>
<td headers="grand_summary_stub_1 total_diarias_otimo" class="gt_row gt_right gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">267</td>
<td headers="grand_summary_stub_1 total_diarias_jurisdicao" class="gt_row gt_right gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">323</td>
<td headers="grand_summary_stub_1 custo_combustivel_otimo" class="gt_row gt_right gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">R$98.699</td>
<td headers="grand_summary_stub_1 custo_combustivel_jurisdicao" class="gt_row gt_right gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">R$97.927</td>
<td headers="grand_summary_stub_1 n_ucs_otimo" class="gt_row gt_right gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">277</td>
<td headers="grand_summary_stub_1 n_ucs_jurisdicao" class="gt_row gt_right gt_grand_summary_row gt_first_grand_summary_row gt_last_summary_row">277</td>
</tr>
</tbody>
<tfoot class="gt_footnotes"><tr>
<td class="gt_footnote" colspan="9"> ** Agências sem alteração: Alagoinhas, Bom Jesus da Lapa, Cachoeira, Camaçari, Cipó, Conceição do Coité, Esplanada, Euclides da Cunha, Guanambi, Ipirá, Irecê, Itaberaba, Jacobina, Jequié, Jeremoabo, Juazeiro, Livramento de nossa Senhora, Morro do Chapéu, Paulo Afonso, Poções, Remanso, Riachão do Jacuípe, Ribeira do Pombal, Santa Maria da Vitória, São Francisco do Conde, Senhor do Bonfim, Serrinha</td>
    </tr></tfoot>
</table>
</div>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span></span>
<span><span class="va">vs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n_agencias"</span>, <span class="st">"custo_total"</span>, <span class="st">'custo_total_entrevistadores'</span>, <span class="st">'custo_diarias'</span>, <span class="st">'custo_combustivel'</span><span class="op">)</span></span>
<span><span class="va">pct</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">/</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">-</span><span class="fl">1</span></span>
<span><span class="va">estrategias_pof_sum</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">descricao</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co">#arrange(modelo)%&gt;%</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">modelo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">diff</span>, .names <span class="op">=</span> <span class="st">"{.col}_dif"</span><span class="op">)</span>,</span>
<span>            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with</a></span><span class="op">(</span><span class="st">"_dif"</span><span class="op">)</span>, <span class="va">pct</span>, .names <span class="op">=</span> <span class="st">"{.col}_pct"</span><span class="op">)</span></span>
<span>            <span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">descricao</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="va">vs</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">n_agencias_dif</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">sumario_pof_0</span></span>
<span></span>
<span><span class="va">sumario_pof</span> <span class="op">&lt;-</span> <span class="va">sumario_pof_0</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n_agencias"</span>, <span class="st">"custo_total"</span>, <span class="st">'custo_total_entrevistadores'</span>, <span class="st">'custo_diarias'</span>, <span class="st">'custo_combustivel'</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">sumario_pof</span> <span class="op">&lt;-</span> <span class="va">sumario_pof</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu">fmt_percent</span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></span><span class="op">(</span><span class="st">"_pct"</span><span class="op">)</span>, decimals <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/cols_merge_n_pct.html" class="external-link">cols_merge_n_pct</a></span><span class="op">(</span>col_pct <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">i</span>,<span class="st">"_pct"</span><span class="op">)</span>, col_n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">i</span>, <span class="st">"_dif"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">sumario_pof</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">fmt_currency</span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></span><span class="op">(</span><span class="st">"_dif"</span><span class="op">)</span>, decimals <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">fmt_number</span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></span><span class="op">(</span><span class="st">"n_agencias_dif"</span><span class="op">)</span>, decimals <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/cols_label.html" class="external-link">cols_label</a></span><span class="op">(</span>descricao<span class="op">=</span><span class="st">'Modelo'</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/cols_label_with.html" class="external-link">cols_label_with</a></span><span class="op">(</span>fn <span class="op">=</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"_dif"</span>, <span class="st">""</span>, <span class="va">.x</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/tab_caption.html" class="external-link">tab_caption</a></span><span class="op">(</span><span class="st">"Redução de custos promovido pela otimização da rede de coleta"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">print_gt</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="fmmyucmrwt" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#fmmyucmrwt table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#fmmyucmrwt thead, #fmmyucmrwt tbody, #fmmyucmrwt tfoot, #fmmyucmrwt tr, #fmmyucmrwt td, #fmmyucmrwt th {
  border-style: none;
}

#fmmyucmrwt p {
  margin: 0;
  padding: 0;
}

#fmmyucmrwt .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#fmmyucmrwt .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#fmmyucmrwt .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#fmmyucmrwt .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#fmmyucmrwt .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fmmyucmrwt .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fmmyucmrwt .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fmmyucmrwt .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#fmmyucmrwt .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#fmmyucmrwt .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#fmmyucmrwt .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#fmmyucmrwt .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#fmmyucmrwt .gt_spanner_row {
  border-bottom-style: hidden;
}

#fmmyucmrwt .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#fmmyucmrwt .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#fmmyucmrwt .gt_from_md > :first-child {
  margin-top: 0;
}

#fmmyucmrwt .gt_from_md > :last-child {
  margin-bottom: 0;
}

#fmmyucmrwt .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#fmmyucmrwt .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#fmmyucmrwt .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#fmmyucmrwt .gt_row_group_first td {
  border-top-width: 2px;
}

#fmmyucmrwt .gt_row_group_first th {
  border-top-width: 2px;
}

#fmmyucmrwt .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fmmyucmrwt .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#fmmyucmrwt .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#fmmyucmrwt .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fmmyucmrwt .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fmmyucmrwt .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#fmmyucmrwt .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#fmmyucmrwt .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#fmmyucmrwt .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fmmyucmrwt .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fmmyucmrwt .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fmmyucmrwt .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fmmyucmrwt .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fmmyucmrwt .gt_left {
  text-align: left;
}

#fmmyucmrwt .gt_center {
  text-align: center;
}

#fmmyucmrwt .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#fmmyucmrwt .gt_font_normal {
  font-weight: normal;
}

#fmmyucmrwt .gt_font_bold {
  font-weight: bold;
}

#fmmyucmrwt .gt_font_italic {
  font-style: italic;
}

#fmmyucmrwt .gt_super {
  font-size: 65%;
}

#fmmyucmrwt .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#fmmyucmrwt .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#fmmyucmrwt .gt_indent_1 {
  text-indent: 5px;
}

#fmmyucmrwt .gt_indent_2 {
  text-indent: 10px;
}

#fmmyucmrwt .gt_indent_3 {
  text-indent: 15px;
}

#fmmyucmrwt .gt_indent_4 {
  text-indent: 20px;
}

#fmmyucmrwt .gt_indent_5 {
  text-indent: 25px;
}

#fmmyucmrwt .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#fmmyucmrwt div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<caption>Redução de custos promovido pela otimização da rede de coleta</caption>
  <thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Modelo">Modelo</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="N Agencias">N Agencias</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Custo Total">Custo Total</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Custo Total Entrevistadores">Custo Total Entrevistadores</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Custo Diarias">Custo Diarias</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Custo Combustivel">Custo Combustivel</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="descricao" class="gt_row gt_left">Somente deslocamento</td>
<td headers="n_agencias_dif" class="gt_row gt_right">0</td>
<td headers="custo_total_dif" class="gt_row gt_right">−R$17.668 (−7,5%)</td>
<td headers="custo_total_entrevistadores_dif" class="gt_row gt_right">R$0</td>
<td headers="custo_diarias_dif" class="gt_row gt_right">−R$18.760 (−17,3%)</td>
<td headers="custo_combustivel_dif" class="gt_row gt_right">R$772 (0,8%)</td>
</tr>
<tr>
<td headers="descricao" class="gt_row gt_left">Custo de treinamento</td>
<td headers="n_agencias_dif" class="gt_row gt_right">−15 (−31,2%)</td>
<td headers="custo_total_dif" class="gt_row gt_right">−R$55.289 (−12,4%)</td>
<td headers="custo_total_entrevistadores_dif" class="gt_row gt_right">−R$66.473 (−31,4%)</td>
<td headers="custo_diarias_dif" class="gt_row gt_right">−R$4.355 (−4,0%)</td>
<td headers="custo_combustivel_dif" class="gt_row gt_right">R$12.249 (12,5%)</td>
</tr>
<tr>
<td headers="descricao" class="gt_row gt_left">Custo de treinamento + remuneração dos apms</td>
<td headers="n_agencias_dif" class="gt_row gt_right">−39 (−81,2%)</td>
<td headers="custo_total_dif" class="gt_row gt_right">−R$1.201.947 (−55,3%)</td>
<td headers="custo_total_entrevistadores_dif" class="gt_row gt_right">−R$1.579.641 (−81,4%)</td>
<td headers="custo_diarias_dif" class="gt_row gt_right">R$336.172 (310,7%)</td>
<td headers="custo_combustivel_dif" class="gt_row gt_right">R$34.418 (35,1%)</td>
</tr>
</tbody>
</table>
</div>
<p>A tabela demonstra o impacto da otimização da rede de coleta em
diferentes cenários, considerando custos fixos, diárias, combustível e
número de agências envolvidas<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Observação: A coleta nas agências da capital, Salvador I
e II, são excluídas do modelo, pois têm coleta realizada pela supervisão
estadual da Pesquisa.&lt;/p&gt;"><sup>2</sup></a>.</p>
<p><strong>Principais Observações:</strong></p>
<p>Em todos os cenários, a otimização resultou em redução significativa
do custo total.</p>
<ul>
<li><p><strong>Realocação de UPAs entre as agências:</strong> A
redistribuição ótima de UPAs entre as agências, sem alteração no número
de agências na coleta, tem o não desprezível impacto de R$ 19
mil.</p></li>
<li><p><strong>Custo de treinamento:</strong> Se incluímos os custos de
treinamento (2 funcionários por agência) o número de agência ótimo
diminui bastante (cerca de 30%), e o valor economizado salta para cerca
de R$ 55 mil. O custo de deslocamento (total de combustível e diárias)
aumenta após a otimização. Isso é explicado pela necessidade de
percorrer distâncias maiores para cobrir as UCs com uma rede menor de
agências. No entanto, esse aumento é mais do que compensado pela redução
dos custos com treinamento, resultando em uma economia geral.</p></li>
<li><p><strong>Custos com remuneração dos entrevistadores:</strong>
Quando incluímos a despesa com e remuneração dos entrevistadores, além
do custo de treinamento dos mesmos, a economia gerada passa de R$ 1
milhão. É definitivamente aqui que está o mais efetivo instrumento para
reduzir os custos de coleta.</p></li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="caso-3--um-novo-modelo-de-coleta-nas-agências">Caso 3. Um novo modelo de coleta nas Agências<a class="anchor" aria-label="anchor" href="#caso-3--um-novo-modelo-de-coleta-nas-ag%C3%AAncias"></a>
</h3>
<p>A seção anterior demonstrou que, pelo menos no caso da coleta da POF
da Bahia, é possível atingir uma significativa redução de custos de
coleta, quando contabilizamos a remuneração dos entrevistadores.
Investigamos nessa seção se, ao contabilizar outras pesquisas do IBGE
executadas pelas agências, em conjunto, a redução de custos ainda é
observada.</p>
<p>A lista de pesquisas incluídas é incompleta, mas já nos possibilita
ter alguma ideia sobre, na perspectiva do modelo de otimização do
<code>orce</code>, a estrutura ideal da rede de coleta do IBGE. Temos,
até o momento:</p>
<ul>
<li>Pesquisas da Amostra Mestra (Domiciliares):</li>
<li>Pesquisa Nacional por Amostra de Domicílios Contínua - PNADC</li>
<li>Cadastro Nacional de Endereços para Fins Estatísticos - CNEFE</li>
<li>Pesquisa de Orçamentos Familiares (POF)</li>
<li>Pesquisas Municipais</li>
<li>Duas visitas por ano para cada um dos municípios do Estado. (Por
exemplo, Munic e alguma outra.)</li>
</ul>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## amostra mestra/pnadc</span></span>
<span><span class="va">amostra_mestra</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_rds.html" class="external-link">read_rds</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data-raw/amostra_br_2024_01_2025_06.rds"</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ano_mes</span><span class="op">&gt;=</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2024-07-01"</span><span class="op">)</span>, <span class="va">ano_mes</span><span class="op">&lt;=</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2025-06-01"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">amostra_pnadc</span> <span class="op">&lt;-</span> <span class="va">amostra_mestra</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span>uc<span class="op">=</span><span class="va">upa</span>, pesquisa<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"pnadc"</span>, <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">ano_mes</span>,<span class="fl">1</span>,<span class="fl">7</span><span class="op">)</span><span class="op">)</span>, <span class="va">agencia_codigo</span>, dias_coleta<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">dias_coleta_pnadc</span>, viagens<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">viagens_pnadc</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span><span class="co">## so months works</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'lubridate'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     date, intersect, setdiff, union</span></span>
<span><span class="va">amostra_cnefe</span> <span class="op">&lt;-</span> <span class="va">amostra_mestra</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">entrevista_numero</span><span class="op">==</span><span class="fl">1</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>ano_mes<span class="op">=</span><span class="va">ano_mes</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/weekday.POSIXt.html" class="external-link">months</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span>uc<span class="op">=</span><span class="va">upa</span>, pesquisa<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"cnefe"</span>, <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">ano_mes</span>,<span class="fl">1</span>,<span class="fl">7</span><span class="op">)</span><span class="op">)</span>, <span class="va">agencia_codigo</span>, dias_coleta<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">dias_coleta_cnefe</span>, viagens<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">viagens_cnefe</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## amostra pof</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu">pof2024ba</span><span class="fu">:::</span><span class="va">package</span><span class="op">$</span><span class="va">cache_dir</span>, <span class="st">"amostra_preliminar.rda"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">amostra_pof</span> <span class="op">&lt;-</span> <span class="va">amostra_preliminar</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span>uc<span class="op">=</span><span class="va">upa</span>, pesquisa<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"pof"</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">trimestre</span><span class="op">==</span><span class="fl">1</span>, <span class="fl">2024</span>, <span class="fl">2025</span><span class="op">)</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">trimestre</span><span class="op">==</span><span class="fl">1</span>, <span class="fl">4</span>, <span class="va">trimestre</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>, agencia_codigo<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">agencia_codigo</span><span class="op">)</span>, dias_coleta<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">dias_coleta_pof</span>, viagens<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">viagens_pof</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## municipais</span></span>
<span><span class="va">municipais</span> <span class="op">&lt;-</span> <span class="va">municipios_22</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">agencias_bdo_mun</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">agencia_codigo</span>, <span class="va">municipio_codigo</span><span class="op">)</span>, by<span class="op">=</span><span class="st">"municipio_codigo"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>uc<span class="op">=</span><span class="va">municipio_codigo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co">## com agências intramunicipais tem mais de uma agência associada a município</span></span>
<span>  <span class="co">## vamos deixar só a primeira (em ordem numérica)</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">municipio_codigo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">agencia_codigo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">uc</span>, pesquisa<span class="op">=</span><span class="st">"municipais"</span>, <span class="va">agencia_codigo</span>, viagens<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">viagens_municipios_carga</span>, dias_coleta<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">dias_coleta_municipios_carga</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">carga_br</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">amostra_cnefe</span>, <span class="va">amostra_pnadc</span>, <span class="va">amostra_pof</span>, <span class="va">municipais</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">uc</span>, <span class="va">agencia_codigo</span>, municipio_codigo<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">uc</span>,<span class="fl">1</span>,<span class="fl">7</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>dias_coleta<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">dias_coleta</span><span class="op">)</span>, viagens<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">viagens</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; `summarise()` has grouped output by 'uc', 'agencia_codigo'. You can override</span></span>
<span><span class="co">#&gt; using the `.groups` argument.</span></span>
<span></span>
<span></span>
<span><span class="va">uf_codigo_now</span> <span class="op">&lt;-</span> <span class="fl">29</span></span>
<span><span class="va">ufnow</span> <span class="op">&lt;-</span> <span class="va">ufs</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">uf_codigo</span><span class="op">==</span><span class="va">uf_codigo_now</span><span class="op">)</span></span>
<span></span>
<span><span class="va">carga_uf</span> <span class="op">&lt;-</span> <span class="va">carga_br</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">uc</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">==</span><span class="va">ufnow</span><span class="op">$</span><span class="va">uf_codigo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co">## Importante: Sem as agências de Salvador</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"2927408"</span>, <span class="va">agencia_codigo</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co">#ungroup#%&gt;%filter(agencia_codigo%in%c("291360600", "291480200", "292870300", "293290300", "290490200", "292740800", "292740801", "291640100"))</span></span>
<span>  <span class="va">ungroup</span><span class="co">#%&gt;%filter(agencia_codigo%in%unique(agencia_codigo)[1:20])</span></span>
<span></span>
<span><span class="co">## distancias uc</span></span>
<span><span class="va">distancias_ucs_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="st">"/Users/eleon/gitlab/orce/data-raw/distancias_agencias_setores_osrm.rds"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>uc<span class="op">=</span><span class="va">setor</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">distancias_agencias_municipios_osrm</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>uc<span class="op">=</span><span class="va">municipio_codigo</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute</a></span><span class="op">(</span><span class="va">uc</span>, <span class="va">agencia_codigo</span>, <span class="va">distancia_km</span>, <span class="va">duracao_horas</span>, municipio_codigo<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">uc</span>,<span class="fl">1</span>,<span class="fl">7</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">agencias_municipios_diaria</span>, by<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"agencia_codigo"</span>, <span class="st">"municipio_codigo"</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">semi_join</a></span><span class="op">(</span><span class="va">carga_uf</span>, by<span class="op">=</span><span class="st">"uc"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>diaria_pernoite<span class="op">=</span><span class="va">duracao_horas</span><span class="op">&gt;</span><span class="va">params</span><span class="op">$</span><span class="va">horas_viagem_pernoite</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">agencias_uf</span> <span class="op">&lt;-</span>  <span class="va">carga_uf</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">agencia_codigo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>n_ucs_jurisdicao<span class="op">=</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>, dias_coleta_jurisdicao<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">dias_coleta</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>uc_agencia_max<span class="op">=</span><span class="cn">Inf</span>, </span>
<span>         dias_coleta_agencia_max<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax</a></span><span class="op">(</span><span class="va">dias_coleta_jurisdicao</span>, <span class="va">params</span><span class="op">$</span><span class="va">dias_coleta_agencia_max_carga</span><span class="op">)</span>, custo_fixo<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co">## sem custo fixo nem custo de treinamento</span></span>
<span><span class="va">params_carga_0</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ucs<span class="op">=</span><span class="va">carga_uf</span>,</span>
<span>                        agencias<span class="op">=</span><span class="va">agencias_uf</span>,</span>
<span>                        custo_litro_combustivel <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">custo_litro_combustivel</span>,</span>
<span>                        custo_hora_viagem <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">custo_hora_viagem</span>,</span>
<span>                        kml <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">kml</span>,</span>
<span>                        valor_diaria <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">valor_diaria</span>,</span>
<span>                        <span class="co">## em um ano de coleta, um entrevistador consegue</span></span>
<span>                        <span class="co">## 48 upas pnadc / 24 upas POF / 18 Municipios</span></span>
<span>                        dias_coleta_entrevistador_max<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">dias_coleta_entrevistador_max_carga</span>,</span>
<span>                        diarias_entrevistador_max<span class="op">=</span><span class="cn">Inf</span>,</span>
<span>                        dias_treinamento <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                        agencias_treinadas <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                        agencias_treinamento  <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                        distancias_ucs<span class="op">=</span><span class="va">distancias_ucs_all</span>,</span>
<span>                        <span class="co">## for symphony solver</span></span>
<span>                        <span class="co">#gap_limit=5, </span></span>
<span>                        adicional_troca_jurisdicao  <span class="op">=</span> <span class="va">params</span><span class="op">$</span><span class="va">adicional_troca_jurisdicao</span>,</span>
<span>                        solver<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">solver</span>,</span>
<span>                        max_time<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">max_time</span>,</span>
<span>                        rel_tol<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">rel_tol</span>,</span>
<span>                        resultado_completo<span class="op">=</span><span class="cn">FALSE</span> </span>
<span>                        <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jabiru/tictoc" class="external-link">tictoc</a></span><span class="op">)</span></span>
<span><span class="co">#tic()</span></span>
<span><span class="va">estrategias_carga</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>params_carga<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">params_carga_0</span><span class="op">)</span>, </span>
<span>         descricao<span class="op">=</span><span class="st">'sem custo fixo / sem custo de treinamento'</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>params_carga<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/modifyList.html" class="external-link">modifyList</a></span><span class="op">(</span><span class="va">params_carga_0</span>, </span>
<span>                                      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span> remuneracao_entrevistador<span class="op">=</span><span class="fl">12</span><span class="op">*</span><span class="fl">2500</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span>, </span>
<span>  descricao<span class="op">=</span><span class="st">'sem mínimo de entrevistador, remuneracao 2500, sem custo fixo'</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>params_carga<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/modifyList.html" class="external-link">modifyList</a></span><span class="op">(</span><span class="va">params_carga_0</span>, </span>
<span>                                      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                                        agencias<span class="op">=</span><span class="va">agencias_uf</span>,</span>
<span>                                        remuneracao_entrevistador<span class="op">=</span><span class="fl">12</span><span class="op">*</span><span class="va">params</span><span class="op">$</span><span class="va">remuneracao_entrevistador</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span>, </span>
<span>  descricao<span class="op">=</span><span class="st">'sem mínimo de entrevistador, sem custo fixo'</span><span class="op">)</span>,</span>
<span>  </span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>params_carga<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/modifyList.html" class="external-link">modifyList</a></span><span class="op">(</span><span class="va">params_carga_0</span>, </span>
<span>                                      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>n_entrevistadores_min<span class="op">=</span><span class="fl">2</span>,</span>
<span>                                        remuneracao_entrevistador<span class="op">=</span><span class="fl">12</span><span class="op">*</span><span class="va">params</span><span class="op">$</span><span class="va">remuneracao_entrevistador</span>,</span>
<span>                                        max_time<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">max_time</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span>, </span>
<span>  descricao<span class="op">=</span><span class="st">'mínimo de 2 entrevistadores, sem custo fixo'</span><span class="op">)</span>,</span>
<span>  </span>
<span>  </span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>params_carga<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/modifyList.html" class="external-link">modifyList</a></span><span class="op">(</span><span class="va">params_carga_0</span>, </span>
<span>                                      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                                        agencias<span class="op">=</span><span class="va">agencias_uf</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>                                          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>                                            custo_fixo<span class="op">=</span><span class="fl">10000</span><span class="op">*</span><span class="fl">12</span><span class="op">)</span>,</span>
<span>                                        n_entrevistadores_min<span class="op">=</span><span class="fl">2</span>,</span>
<span>                                        remuneracao_entrevistador<span class="op">=</span><span class="fl">12</span><span class="op">*</span><span class="va">params</span><span class="op">$</span><span class="va">remuneracao_entrevistador</span>,</span>
<span>                                        max_time<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">params</span><span class="op">$</span><span class="va">max_time</span>, <span class="fl">60</span><span class="op">*</span><span class="fl">60</span><span class="op">)</span></span>
<span>                                        <span class="co">#max_time=</span></span>
<span>                                      <span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>         descricao<span class="op">=</span><span class="st">'mínimo de 2 entrevistadores /2 Técnicos 10000 p/ mes (custo fixo)'</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>params_carga<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/modifyList.html" class="external-link">modifyList</a></span><span class="op">(</span><span class="va">params_carga_0</span>, </span>
<span>                                      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                                        distancias_ucs<span class="op">=</span><span class="va">params_carga_0</span><span class="op">$</span><span class="va">distancias_ucs</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>                                          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>diaria_municipio<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>                                  agencias<span class="op">=</span><span class="va">agencias_uf</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>                                  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>                                  custo_fixo<span class="op">=</span><span class="fl">10000</span><span class="op">*</span><span class="fl">12</span><span class="op">)</span>,</span>
<span>                                  n_entrevistadores_min<span class="op">=</span><span class="fl">2</span>,</span>
<span>                                  remuneracao_entrevistador<span class="op">=</span><span class="fl">12</span><span class="op">*</span><span class="va">params</span><span class="op">$</span><span class="va">remuneracao_entrevistador</span></span>
<span>                                <span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>         descricao<span class="op">=</span><span class="st">'mínimo 2 entrevistadores /2 Técnicos (10000 p/ mes custo fixo), reorganizacao jurisdicao'</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>params_carga<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/modifyList.html" class="external-link">modifyList</a></span><span class="op">(</span><span class="va">params_carga_0</span>, </span>
<span>                                <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                                  valor_diaria<span class="op">=</span><span class="va">params</span><span class="op">$</span><span class="va">valor_diaria</span><span class="op">*</span><span class="fl">2</span>,</span>
<span>                                  distancias_ucs<span class="op">=</span><span class="va">params_carga_0</span><span class="op">$</span><span class="va">distancias_ucs</span>,</span>
<span>                                  agencias<span class="op">=</span><span class="va">agencias_uf</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>                                  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>                                  custo_fixo<span class="op">=</span><span class="fl">10000</span><span class="op">*</span><span class="fl">12</span><span class="op">)</span>,</span>
<span>                                  n_entrevistadores_min<span class="op">=</span><span class="fl">2</span>,</span>
<span>                                  remuneracao_entrevistador<span class="op">=</span><span class="fl">12</span><span class="op">*</span><span class="va">params</span><span class="op">$</span><span class="va">remuneracao_entrevistador</span></span>
<span>                                <span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>         descricao<span class="op">=</span><span class="st">'mínimo de 2 entrevistadores/2 Técnicos 10000 p/ mes (custo fixo)/ custo diaria 2x'</span><span class="op">)</span></span>
<span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co">#ungroup%&gt;%slice(-1)%&gt;%</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>resultado<span class="op">=</span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">params_carga</span>, <span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">alocar_municipios</span>, <span class="va">.x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#toc()</span></span>
<span></span>
<span><span class="va">estrategias_carga_sum</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">estrategias_carga</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rowwise.html" class="external-link">rowwise</a></span><span class="op">(</span><span class="va">descricao</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/reframe.html" class="external-link">reframe</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span></span>
<span>      <span class="va">resultado</span><span class="op">$</span><span class="va">resultado_agencias_otimo</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>modelo<span class="op">=</span><span class="st">"Ótimo"</span><span class="op">)</span>,</span>
<span>      <span class="va">resultado</span><span class="op">$</span><span class="va">resultado_agencias_jurisdicao</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>modelo<span class="op">=</span><span class="st">"Jurisdição"</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">modelo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>n_agencias<span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></span><span class="op">(</span><span class="st">"custo|n_agencias"</span><span class="op">)</span>, <span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">.x</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>custo_total<span class="op">=</span><span class="va">custo_deslocamento</span><span class="op">+</span><span class="va">custo_fixo</span><span class="op">+</span><span class="va">custo_total_entrevistadores</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">descricao</span>, <span class="va">modelo</span>, <span class="va">n_agencias</span>, <span class="va">custo_total</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#report_plans(estrategias_carga$resultado[[1]])</span></span>
<span></span>
<span><span class="va">estrategias_carga_sum</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">descricao</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">descricao</span>, <span class="va">modelo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">modelo</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">diff</span><span class="op">)</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">n_agencias</span><span class="op">)</span>, <span class="va">custo_total</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">descricao</span>, <span class="va">n_agencias</span>, <span class="va">custo_total</span>, <span class="va">custo_total_entrevistadores</span>, <span class="va">custo_diarias</span>, <span class="va">custo_combustivel</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co">#arrange(-custo_total)%&gt;%</span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/cols_label.html" class="external-link">cols_label</a></span><span class="op">(</span>descricao<span class="op">=</span><span class="st">'Modelo'</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/tab_caption.html" class="external-link">tab_caption</a></span><span class="op">(</span><span class="st">"Redução de custos promovido pela otimização da rede de coleta"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">print_gt</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="kdbirslsqj" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#kdbirslsqj table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#kdbirslsqj thead, #kdbirslsqj tbody, #kdbirslsqj tfoot, #kdbirslsqj tr, #kdbirslsqj td, #kdbirslsqj th {
  border-style: none;
}

#kdbirslsqj p {
  margin: 0;
  padding: 0;
}

#kdbirslsqj .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#kdbirslsqj .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#kdbirslsqj .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#kdbirslsqj .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#kdbirslsqj .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kdbirslsqj .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kdbirslsqj .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kdbirslsqj .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#kdbirslsqj .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#kdbirslsqj .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#kdbirslsqj .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#kdbirslsqj .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#kdbirslsqj .gt_spanner_row {
  border-bottom-style: hidden;
}

#kdbirslsqj .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#kdbirslsqj .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#kdbirslsqj .gt_from_md > :first-child {
  margin-top: 0;
}

#kdbirslsqj .gt_from_md > :last-child {
  margin-bottom: 0;
}

#kdbirslsqj .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#kdbirslsqj .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#kdbirslsqj .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#kdbirslsqj .gt_row_group_first td {
  border-top-width: 2px;
}

#kdbirslsqj .gt_row_group_first th {
  border-top-width: 2px;
}

#kdbirslsqj .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kdbirslsqj .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#kdbirslsqj .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#kdbirslsqj .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kdbirslsqj .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kdbirslsqj .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#kdbirslsqj .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#kdbirslsqj .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#kdbirslsqj .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kdbirslsqj .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kdbirslsqj .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kdbirslsqj .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kdbirslsqj .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kdbirslsqj .gt_left {
  text-align: left;
}

#kdbirslsqj .gt_center {
  text-align: center;
}

#kdbirslsqj .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#kdbirslsqj .gt_font_normal {
  font-weight: normal;
}

#kdbirslsqj .gt_font_bold {
  font-weight: bold;
}

#kdbirslsqj .gt_font_italic {
  font-style: italic;
}

#kdbirslsqj .gt_super {
  font-size: 65%;
}

#kdbirslsqj .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#kdbirslsqj .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#kdbirslsqj .gt_indent_1 {
  text-indent: 5px;
}

#kdbirslsqj .gt_indent_2 {
  text-indent: 10px;
}

#kdbirslsqj .gt_indent_3 {
  text-indent: 15px;
}

#kdbirslsqj .gt_indent_4 {
  text-indent: 20px;
}

#kdbirslsqj .gt_indent_5 {
  text-indent: 25px;
}

#kdbirslsqj .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#kdbirslsqj div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<caption>Redução de custos promovido pela otimização da rede de coleta</caption>
  <thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Modelo">Modelo</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="N Agencias">N Agencias</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Custo Total">Custo Total</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Custo Total Entrevistadores">Custo Total Entrevistadores</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Custo Diarias">Custo Diarias</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Custo Combustivel">Custo Combustivel</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="descricao" class="gt_row gt_left">sem custo fixo / sem custo de treinamento</td>
<td headers="n_agencias" class="gt_row gt_right">0</td>
<td headers="custo_total" class="gt_row gt_right">−R$108.432</td>
<td headers="custo_total_entrevistadores" class="gt_row gt_right">R$0</td>
<td headers="custo_diarias" class="gt_row gt_right">−R$121.605</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$9.210</td>
</tr>
<tr>
<td headers="descricao" class="gt_row gt_left">sem mínimo de entrevistador, remuneracao 2500, sem custo fixo</td>
<td headers="n_agencias" class="gt_row gt_right">−1</td>
<td headers="custo_total" class="gt_row gt_right">−R$441.881</td>
<td headers="custo_total_entrevistadores" class="gt_row gt_right">−R$420.000</td>
<td headers="custo_diarias" class="gt_row gt_right">−R$53.432</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$24.055</td>
</tr>
<tr>
<td headers="descricao" class="gt_row gt_left">sem mínimo de entrevistador, sem custo fixo</td>
<td headers="n_agencias" class="gt_row gt_right">−1</td>
<td headers="custo_total" class="gt_row gt_right">−R$325.864</td>
<td headers="custo_total_entrevistadores" class="gt_row gt_right">−R$378.000</td>
<td headers="custo_diarias" class="gt_row gt_right">−R$6.198</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$45.154</td>
</tr>
<tr>
<td headers="descricao" class="gt_row gt_left">mínimo de 2 entrevistadores, sem custo fixo</td>
<td headers="n_agencias" class="gt_row gt_right">−4</td>
<td headers="custo_total" class="gt_row gt_right">−R$389.712</td>
<td headers="custo_total_entrevistadores" class="gt_row gt_right">−R$396.000</td>
<td headers="custo_diarias" class="gt_row gt_right">−R$31.322</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$28.394</td>
</tr>
<tr>
<td headers="descricao" class="gt_row gt_left">mínimo de 2 entrevistadores/2 Técnicos 10000 p/ mes (custo fixo)/ custo diaria 2x</td>
<td headers="n_agencias" class="gt_row gt_right">−15</td>
<td headers="custo_total" class="gt_row gt_right">−R$1.548.620</td>
<td headers="custo_total_entrevistadores" class="gt_row gt_right">−R$522.000</td>
<td headers="custo_diarias" class="gt_row gt_right">R$596.635</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$140.385</td>
</tr>
<tr>
<td headers="descricao" class="gt_row gt_left">mínimo de 2 entrevistadores /2 Técnicos 10000 p/ mes (custo fixo)</td>
<td headers="n_agencias" class="gt_row gt_right">−16</td>
<td headers="custo_total" class="gt_row gt_right">−R$965.095</td>
<td headers="custo_total_entrevistadores" class="gt_row gt_right">−R$450.000</td>
<td headers="custo_diarias" class="gt_row gt_right">R$1.124.092</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$226.650</td>
</tr>
<tr>
<td headers="descricao" class="gt_row gt_left">mínimo 2 entrevistadores /2 Técnicos (10000 p/ mes custo fixo), reorganizacao jurisdicao</td>
<td headers="n_agencias" class="gt_row gt_right">−17</td>
<td headers="custo_total" class="gt_row gt_right">−R$1.730.877</td>
<td headers="custo_total_entrevistadores" class="gt_row gt_right">−R$522.000</td>
<td headers="custo_diarias" class="gt_row gt_right">R$604.842</td>
<td headers="custo_combustivel" class="gt_row gt_right">R$181.182</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="conclusão">Conclusão<a class="anchor" aria-label="anchor" href="#conclus%C3%A3o"></a>
</h3>
<p>A otimização da rede de coleta promovida pelo pacote
<code>orce</code> tem um impacto significativo na redução de custos,
principalmente pela diminuição dos custos fixos associados às agências.
A estratégia mais eficaz envolve a combinação da redução do número de
agências, a imposição de limites de UPAs por agência e a reorganização
da jurisdição, e é provavelmente vantajoso (impor o limite) para a boa
gestão da coleta.</p>
<p>É importante ressaltar que a otimização deve considerar não apenas os
custos, mas também outros fatores como a qualidade dos dados coletados e
a capacidade operacional das agências. O pacote <code>orce</code>
oferece flexibilidade para ajustar os parâmetros e restrições do modelo,
permitindo encontrar a solução que melhor se adapta às necessidades e
particularidades de cada pesquisa.</p>
<hr>
</div>
<div class="section level3">
<h3 id="apêndice-detalhes-técnicos-do-problema-de-otimização">Apêndice: Detalhes técnicos do problema de otimização<a class="anchor" aria-label="anchor" href="#ap%C3%AAndice-detalhes-t%C3%A9cnicos-do-problema-de-otimiza%C3%A7%C3%A3o"></a>
</h3>
<p>Este apêndice detalha o problema de otimização que o pacote orce
resolve, que é a alocação ideal de Unidades de Coleta (UCs) às agências,
com o objetivo de minimizar os custos totais, incluindo custos de
deslocamento e custos fixos de cada agência. O modelo de otimização é
baseado no problema clássico de localização de armazéns, e é baseado em
<a href="https://dirkschumacher.github.io/ompr/articles/problem-warehouse-location.html" class="external-link">“The
Warehouse Location Problem”</a>, de Dirk Schumacher.</p>
<div class="section level4">
<h4 id="o-desafio">O Desafio<a class="anchor" aria-label="anchor" href="#o-desafio"></a>
</h4>
<p>Dadas as localizações das UCs e das agências, a tarefa é decidir
quais agências serão utilizadas e como as UPAs serão distribuídas entre
elas. Em outras palavras, precisamos decidir simultaneamente:</p>
<ul>
<li>Quais agências treinar/contratar.</li>
<li>Como alocar as UC a cada agência.</li>
</ul>
<p>Começamos com um conjunto de UCs
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi><mo>=</mo><mo stretchy="false" form="prefix">{</mo><mn>1</mn><mi>…</mi><mi>n</mi><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">U = \{1 \ldots n\}</annotation></semantics></math>
e um conjunto de agências potenciais
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><mo stretchy="false" form="prefix">{</mo><mn>1</mn><mi>…</mi><mi>m</mi><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">A = \{1 \ldots m\}</annotation></semantics></math>
que poderiam ser ativadas. Também temos uma função de custo que fornece
o custo de viagem de uma agência para uma UC. Além disso, há um custo
fixo (incluindo custos de treinamento, entre outros) associado a cada
agência, caso ela seja selecionada para a coleta de dados. Agências com
um pequeno número de UCs podem ser inviáveis. Agências no interior com
um grande número de UCs também podem ser inviáveis. A solução deve ter
pelo menos <em>min_upas</em> e no máximo <em>max_upas</em> por agência
ativada. Observe que, ao permitir a coleta “semi-centralizada”, não há
limite para o número de UCs nas agências listadas.</p>
<p>Para modelar essa situação, usamos duas variáveis de decisão:</p>
<ul>
<li><p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>x</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><annotation encoding="application/x-tex">x_{i,j}</annotation></semantics></math>:
uma variável binária que assume o valor 1 se a UC
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>
for alocada à agência
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>j</mi><annotation encoding="application/x-tex">j</annotation></semantics></math>
e 0 caso contrário.</p></li>
<li><p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>y</mi><mi>j</mi></msub><annotation encoding="application/x-tex">y_j</annotation></semantics></math>:
uma variável binária que assume o valor 1 se a agência
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>j</mi><annotation encoding="application/x-tex">j</annotation></semantics></math>
for selecionada para realizar a coleta e 0 caso contrário.</p></li>
</ul>
<p><span class="math display">$$
\begin{array}{ll@{}ll}
\text{minimizar} &amp;
\displaystyle\sum\limits_{i=1}^{n}\sum\limits_{j=1}^{m}
custo\_de\_viagem_{i,j} \cdot x_{i, j} + \sum\limits_{j=1}^{m}
custo\_fixo_{j} \cdot y_{j}&amp; &amp;\\
\text{sujeito a} &amp; \displaystyle\sum\limits_{j=1}^{m} x_{i, j} = 1
&amp; i=1 ,\ldots, n&amp;\\
&amp; \displaystyle x_{i, j} \leq y_j, &amp; i=1 ,\ldots, n &amp; j=1
,\ldots, m\\
&amp; x_{i,j} \in \{0,1\} &amp;i=1 ,\ldots, n, &amp; j=1 ,\ldots, m \\
&amp; y_{j} \in \{0,1\} &amp;j=1 ,\ldots, m&amp; \\
&amp; \operatorname{(opcional)} \sum\limits_{i=1}^{n}{x}_{i,j} &gt;= (
\operatorname{min\_upas} \cdot y_{j}) &amp; j=1 ,\ldots, m&amp;
\\
&amp; \operatorname{(opcional)} \sum\limits_{i=1}^{n}{x}_{i,j} &lt;=
\operatorname{max\_upas}_{j} &amp; j=1 ,\ldots, m&amp;
\end{array}
$$</span></p>
<p><strong>Explicação:</strong></p>
<ul>
<li>
<strong>Função Objetivo:</strong> Minimizar o custo total, que é a
soma dos custos de viagem para cada UC alocada a uma agência e dos
custos fixos de cada agência ativada.</li>
<li>
<strong>Restrições:</strong>
<ul>
<li><strong>Cada UC deve ser alocada a exatamente uma
agência.</strong></li>
<li><strong>Uma agência só pode receber UCs se estiver
ativa.</strong></li>
<li>
<strong>Opcional:</strong> Cada agência ativada deve ter pelo menos
<code>min_upas</code> UCs alocadas.</li>
<li>
<strong>Opcional:</strong> Cada agência ativada deve ter no máximo
<code>max_upas</code> UCs alocadas.</li>
</ul>
</li>
</ul>
<p><strong>Variáveis de Decisão:</strong></p>
<ul>
<li>
<strong>x[i, j]</strong>: Indica se a UC <code>i</code> é alocada à
agência <code>j</code> (1 se sim, 0 se não).</li>
<li>
<strong>y[j]</strong>: Indica se a agência <code>j</code> está ativa
(1 se sim, 0 se não).</li>
</ul>
<p>Este modelo matemático representa o problema de alocação ótima e é
resolvido pelo pacote <code>orce</code> para encontrar a solução que
minimiza os custos totais, considerando as restrições e os custos
específicos de cada cenário.</p>
</div>
</div>
<div class="section level3">
<h3 id="apêndice-função-principal-alocar_ucs">Apêndice: Função principal: <code>alocar_ucs</code><a class="anchor" aria-label="anchor" href="#ap%C3%AAndice-fun%C3%A7%C3%A3o-principal-alocar_ucs"></a>
</h3>
<p>A função <code>alocar_ucs</code> realiza a alocação otimizada de
Unidades de Coleta (UCs) às agências, buscando minimizar os custos
totais de deslocamento e operação. O processo de otimização considera
diversas variáveis e restrições para encontrar a solução mais
eficiente.</p>
<p><strong>Entradas da Função</strong></p>
<ul>
<li>
<strong>Dados das UCs (<code>ucs</code>)</strong>:
<ul>
<li>
<code>uc</code>: código único da UC</li>
<li>
<code>agencia_codigo</code>: código da agência à qual a UC está
atualmente alocada</li>
<li>
<code>dias_coleta</code>: número de dias de coleta na UC</li>
<li>
<code>viagens</code>: número de viagens necessárias para a coleta na
UC</li>
</ul>
</li>
<li>
<strong>Dados das Agências (<code>agencias</code>)</strong>:
(opcional, se não fornecido, assume as agências das UCs)
<ul>
<li>
<code>agencia_codigo</code>: código único da agência</li>
</ul>
</li>
<li>
<strong>Parâmetros de Custo</strong>:
<ul>
<li>
<code>custo_litro_combustivel</code>: custo do combustível por
litro</li>
<li>
<code>custo_hora_viagem</code>: custo por hora de viagem</li>
<li>
<code>kml</code>: consumo médio de combustível do veículo
(km/l)</li>
<li>
<code>valor_diaria</code>: valor da diária</li>
<li>
<code>custo_fixo</code>: custo fixo mensal da agência</li>
<li>
<code>dias_treinamento</code>: número de dias/diárias para
treinamento</li>
<li>
<code>adicional_troca_jurisdicao</code>: custo adicional por troca
de jurisdição</li>
</ul>
</li>
<li>
<strong>Restrições de Alocação</strong>:
<ul>
<li>
<code>min_uc_agencia</code>: número mínimo de UCs por agência
(exceto agências treinadas)</li>
<li>
<code>max_uc_agencia</code>: número máximo de UCs por agência</li>
<li>
<code>semi_centralizada</code>: vetor com códigos de agências sem
limite máximo de UCs</li>
<li>
<code>agencias_treinadas</code>: vetor com códigos de agências já
treinadas (sem custo de treinamento)</li>
<li>
<code>agencias_treinamento</code>: código da(s) agência(s) de
treinamento</li>
</ul>
</li>
<li>
<strong>Dados de Distância</strong>:
<ul>
<li>
<code>distancias_ucs</code>: distâncias entre UCs e agências,
contendo:</li>
<li>uc, agencia_codigo, duracao_horas, diaria_municipio,
diaria_pernoite</li>
<li>
<code>distancias_agencias</code>: distâncias entre as agências</li>
</ul>
</li>
<li>
<strong>Outras Opções</strong>:
<ul>
<li>
<code>resultado_completo</code>: se TRUE, retorna informações
adicionais sobre todas as combinações de UCs e agências</li>
</ul>
</li>
</ul>
<p><strong>Processamento Interno</strong></p>
<ol style="list-style-type: decimal">
<li>
<strong>Pré-processamento</strong>:
<ul>
<li>Verifica se os argumentos de entrada são válidos</li>
<li>Define o número máximo de UCs por agência, se não fornecido</li>
<li>Cria a alocação por jurisdição (se <code>agencias</code> não for
fornecido, assume as agências das UCs)</li>
<li>Seleciona a agência de treinamento mais próxima para cada agência de
coleta</li>
<li>Calcula os custos de treinamento com base na distância e se a
agência já foi treinada</li>
<li>Combina informações de UCs e agências em um formato adequado para a
otimização</li>
<li>Calcula os custos de transporte (combustível, tempo de viagem,
diárias) para cada combinação de UC e agência</li>
</ul>
</li>
<li>
<strong>Modelagem da Otimização</strong>:
<ul>
<li>Utiliza o pacote <code>ompr</code> para criar um modelo de
otimização</li>
<li>Define variáveis de decisão:
<ul>
<li>
<code>x[i, j]</code>: 1 se a UC <code>i</code> for alocada à agência
<code>j</code>, 0 caso contrário</li>
<li>
<code>y[j]</code>: 1 se a agência <code>j</code> for incluída na
solução, 0 caso contrário</li>
</ul>
</li>
<li>Define a função objetivo: minimizar o custo total (deslocamento +
custos fixos das agências + custos de treinamento)</li>
<li>Adiciona restrições:
<ul>
<li>Cada UC deve ser alocada a exatamente uma agência</li>
<li>Se uma UC é alocada a uma agência, a agência deve estar ativa</li>
<li>Restrições de número mínimo e máximo de UCs por agência (se
aplicável)</li>
</ul>
</li>
</ul>
</li>
<li>
<strong>Solução da Otimização</strong>:
<ul>
<li>Resolve o modelo usando o solver GLPK</li>
<li>Extrai a solução ótima: quais UCs são alocadas a quais agências</li>
</ul>
</li>
<li>
<strong>Pós-processamento</strong>:
<ul>
<li>Cria tabelas com os resultados da alocação ótima e da alocação
original (por jurisdição), tanto para UCs quanto para agências</li>
<li>Se <code>resultado_completo</code> for TRUE, retorna também um
<code>tibble</code> com todas as combinações de UCs e agências e seus
respectivos custos</li>
</ul>
</li>
</ol>
<p><strong>Saídas da Função</strong></p>
<ul>
<li>
<code>resultado_ucs_otimo</code>: alocação ótima das UCs e seus
custos</li>
<li>
<code>resultado_ucs_jurisdicao</code>: alocação original das UCs e
seus custos</li>
<li>
<code>resultado_agencias_otimo</code>: alocação ótima das agências,
custos e número de UCs alocadas</li>
<li>
<code>resultado_agencias_jurisdicao</code>: alocação original das
agências, custos e número de UCs alocadas</li>
<li>
<code>ucs_agencias_todas</code> (opcional): todas as combinações de
UCs e agências e seus custos</li>
</ul>
<p><strong>Observações</strong></p>
<ul>
<li>O cálculo de diárias já considera jurisdição, microrregiões, áreas
metropolitanas e distância/necessidade de pernoite.</li>
<li>A flexibilidade do pacote permite ajustar os parâmetros e restrições
para atender às necessidades específicas do planejamento da coleta de
dados.</li>
</ul>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Eduardo Leoni.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
